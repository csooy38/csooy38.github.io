I"~<h1 id="í•˜ë‹¨ì—-ì´ë™í• -í˜ì´ì§€-ë„£ê¸°">í•˜ë‹¨ì— ì´ë™í•  í˜ì´ì§€ ë„£ê¸°</h1>

<p><br /></p>

<p align="center"><img src="../assets/img/images/210517/00.png" /></p>

<p>í•˜ë‹¨ì— [1][2][3] â€¦ ê³¼ ê°™ì´ í´ë¦­í•˜ë©´ í•´ë‹¹ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ëŠ” í˜ì´ì§•ì„ í•´ ë³´ì.</p>

<p><br /></p>

<hr />
<h2 id="0-action-ì¸í„°í˜ì´ìŠ¤">0. Action ì¸í„°í˜ì´ìŠ¤</h2>
<p>ì´ë²ˆ ê²Œì‹œíŒë„ MVC2íŒ¨í„´ì— Action ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤.<br />
ê¸°ì¡´ ê²Œì‹œíŒê³¼ì˜ ì°¨ì´ì ì€, ê¸°ì¡´ì—ëŠ” Action ì¸í„°í˜ì´ìŠ¤ì— String íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” ì¶”ìƒë©”ì„œë“œë¥¼ ì„ ì–¸í–ˆë‹¤ë©´,<br />
ì´ë²ˆ ê²Œì‹œíŒì€ ë°˜í™˜ íƒ€ì…ì´ ì—†ëŠ” void ì¶”ìƒë©”ì„œë“œë¥¼ ì‚¬ìš©í–ˆë‹¤ëŠ” ì ì´ë‹¤.</p>

<p>ë”°ë¼ì„œ Action í´ë˜ìŠ¤ ì‘ì„±ê³¼ ì—ëŸ¬ì½”ë“œ(Null)ì—ì„  ììœ ë¡œì›Œì¡Œì§€ë§Œ<br />
FrontController ì„œë¸”ë¦¿(ì—­í• )ì—ì„œ ì²˜ë¦¬í•´ì•¼ í•  ì½”ë“œë“¤ì´ ëŠ˜ì—ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Action</span> <span class="o">{</span>

	<span class="c1">// ì¶”ìƒ ë©”ì„œë“œ</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì•ìœ¼ë¡œ í•„ìš”í•œ ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±í•  ë•Œë§ˆë‹¤ ìƒì†ë°›ì•„ ì‚¬ìš©í•œë‹¤.</p>

<p><br /></p>

<hr />
<h2 id="1-indexjsp">1. index.jsp</h2>
<p>ê²Œì‹œíŒì— ë“¤ì–´ê°€ê¸° ìœ„í•œ ê¸°ë³¸ì ì¸ ì›¹ í˜ì´ì§€ë¥¼ ì‘ì„±í•œë‹¤.</p>

<p>[ì „ì²´ ê²Œì‹œë¬¼] ì„ í´ë¦­í•˜ë©´ â€œboard_list.doâ€ë¥¼ FrontController ë¡œ ë³´ë‚´ ë¬¸ìì—´ì— ë§ëŠ” ì•¡ì…˜í´ë˜ìŠ¤ë¥¼ ì‹¤í–‰í•œë‹¤.</p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;body&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"blue"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;h3&gt;</span>BOARD í…Œì´ë¸” ë©”ì¸ í˜ì´ì§€<span class="nt">&lt;/h3&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"blue"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;br&gt;&lt;br&gt;</span>
		
		<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span> <span class="nt">%&gt;</span><span class="s">/board_list.do"</span><span class="nt">&gt;</span>[ì „ì²´ ê²Œì‹œë¬¼]<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>
<p><br /></p>

<hr />
<h2 id="2-frontcontroller">2. FrontController</h2>
<p>1) service ë©”ì„œë“œ ì•„ë˜ì— ê¸°ë³¸ì ìœ¼ë¡œ request, response í•œê¸€ ì¸ì½”ë”© ì²˜ë¦¬ë¥¼ í•œë‹¤.<br />
requestëŠ” ì›¹í˜ì´ì§€ì—ì„œ ìš”ì²­í•˜ëŠ” ë©”ì‹œì§€, responseëŠ” ì„œë²„ì—ì„œ ë°˜í™˜í•˜ëŠ” ë©”ì„¸ì§€ì˜ í•œê¸€ ì¸ì½”ë”©ì„ ë‹¤ë£¬ë‹¤.<br />
ì´ ì‘ì—…ì„ í•˜ì§€ ì•Šìœ¼ë©´ ì¸ì½”ë”©ì´ ë‹¬ë¼ ì›¹ í˜ì´ì§€ì—ì„œ ê¸€ìê°€ ê¹¨ì§€ê¸°ë„ í•˜ë¯€ë¡œ ê¼­ í•˜ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1) í•œê¸€ ì¸ì½”ë”© ì‘ì—…</span>
<span class="n">request</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
<span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html; charset=UTF-8"</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<p>2) uriì—ì„œ íŒŒì¼ëª…(*.do)ì„ êµ¬í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 2) íŒŒì¼ëª…ì„ êµ¬í•˜ëŠ” ì‘ì—…</span>
<span class="c1">// getRequestURI() : "/í”„ë¡œì íŠ¸ëª…/íŒŒì¼ëª…(*.do)" ë¼ëŠ” ë¬¸ìì—´ì„ String íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•´ ì£¼ëŠ” ë©”ì„œë“œ.</span>
<span class="nc">String</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestURI</span><span class="o">();</span>
		
<span class="c1">// getContextPath() : í˜„ì¬ í”„ë¡œì íŠ¸ëª…ì„ String íƒ€ì…ìœ¼ë¡œ ë°˜í™”í•´ ì£¼ëŠ” ë©”ì„œë“œ.</span>
<span class="nc">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">();</span>
		
<span class="nc">String</span> <span class="n">command</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<p>3) 2)ì—ì„œ êµ¬í•œ íŒŒì¼ëª…ì„ ifë¬¸ì— ë„£ì–´ ê°ê°ì˜ Action í´ë˜ìŠ¤ì˜ excute() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. <br />
equals() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ê°ê°ì˜ ëª…ë ¹ì–´ì— ë”°ë¼ ì‹¤í–‰ëœ Action ìì‹ í´ë˜ìŠ¤ë“¤ì„ ë¶„ë¥˜í•˜ì—¬ ì‘ì„±í•œë‹¤.<br />
ì‘ì—…ì— ë”°ë¼ í˜ì´ì§€ ì´ë™ì´ ì´ë£¨ì–´ì§€ë©´, ì´ë™í•  í˜ì´ì§€ ì£¼ì†Œë¥¼ â€œviewPageâ€ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 3) íŒŒì¼ëª…ì„ ëŒ€ì¡°í•˜ì—¬ í•´ë‹¹ Actioní´ë˜ìŠ¤ì˜ excute() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì‘ì—…</span>
<span class="nc">Action</span> <span class="n">action</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>		<span class="c1">// íŒŒì¼ëª…ê³¼ ëŒ€ì¡°í•˜ì—¬ í•´ë‹¹ Action í´ë˜ìŠ¤(ìì‹í´ë˜ìŠ¤ë¡œ)ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì„ ì–¸.</span>
<span class="nc">String</span> <span class="n">viewPage</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>	<span class="c1">// ì•¡ì…˜ í´ë˜ìŠ¤ ì‹¤í–‰ í›„ ì´ë™í•  ì£¼ì†Œë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ ì„ ì–¸.</span>
		
<span class="k">if</span><span class="o">(</span><span class="n">command</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"board_list.do"</span><span class="o">))</span> <span class="o">{</span>
	<span class="c1">// íŒŒì¼ëª…ì´ "board_list.do"ì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” Action ìì‹ í´ë˜ìŠ¤.</span>
	<span class="n">action</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BoardListAction</span><span class="o">();</span>
	
	<span class="c1">// í´ë˜ìŠ¤ì˜ excute() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</span>
	<span class="n">action</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
	
	<span class="c1">// ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì´ë™í•  í˜ì´ì§€ë¥¼ viewPage ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</span>
	<span class="n">viewPage</span> <span class="o">=</span> <span class="s">"view/board_list.jsp"</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<p>4) í˜ì´ì§€ë¥¼ ì´ë™í•œë‹¤.<br />
Action í´ë˜ìŠ¤ì˜ excute() ë©”ì„œë“œ ì‹¤í–‰ í›„ ì €ì¥ëœ â€œviewPageâ€ë¡œ ì´ë™í•œë‹¤. <br />
ì´ ë•Œ requestì— ì €ì¥ëœ Attribute ê°’ì´ ìˆë‹¤ë©´ í•¨ê»˜ ì´ë™ëœë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 4) í˜ì´ì§€ ì´ë™ ì‘ì—…</span>
<span class="nc">RequestDispatcher</span> <span class="n">rd</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">viewPage</span><span class="o">);</span>
<span class="n">rd</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="3-boardlistaction-í´ë˜ìŠ¤">3. BoardListAction í´ë˜ìŠ¤</h2>

<ul>
  <li>ë³¸ê²©ì ì¸ í˜ì´ì§• ì‘ì—…</li>
</ul>

<p>FrontController ì—ì„œ ëŒ€ì¡°ë˜ì–´ íŒŒì¼ëª…ì´ â€œboard_list.doâ€ ì¼ ë•Œ ì‹¤í–‰ë˜ëŠ” í´ë˜ìŠ¤ë‹¤.<br />
DBìƒì˜ ê²Œì‹œê¸€ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•œë‹¤.
ì—¬ê¸°ì„œ ë³¸ê²©ì ì¸ í˜ì´ì§• ì‘ì—…ì„ í•œë‹¤. ê²Œì‹œê¸€ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³¼ ë•Œë§Œ í•˜ë‹¨ì— ì´ë™í•  í˜ì´ì§€ê°€ í‘œì‹œë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p>1) í•„ìš”í•œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•œë‹¤.</p>

<p align="center"><img src="../assets/img/images/210517/01.png" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1) ë³€ìˆ˜ ì„ ì–¸</span>
<span class="kt">int</span> <span class="n">rowsize</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>	<span class="c1">// í•œ í˜ì´ì§€ë‹¹ ë³´ì—¬ì§ˆ ê²Œì‹œë¬¼ì˜ ìˆ˜</span>
<span class="kt">int</span> <span class="n">block</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>		<span class="c1">// í•˜ë‹¨ì— ë³´ì—¬ì§ˆ í˜ì´ì§€ì˜ ìµœëŒ€ ìˆ˜ ì˜ˆ) [1][2][3] / [4][5][6] (ìµœëŒ€ 3ê°œì”©)</span>
<span class="kt">int</span> <span class="n">totalRecord</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span><span class="c1">// DBìƒì˜ ê²Œì‹œë¬¼ ì „ì²´ ìˆ˜</span>
<span class="kt">int</span> <span class="n">allPage</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>	<span class="c1">// ì „ì²´ í˜ì´ì§€ ìˆ˜</span>
		
<span class="kt">int</span> <span class="n">page</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>		<span class="c1">// í˜„ì¬ í˜ì´ì§€ ë³€ìˆ˜</span>
<span class="k">if</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"page"</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">// requestì— ì €ì¥ëœ page íŒŒë¼ë¯¸í„°ê°€ ìˆì„ ê²½ìš° í•´ë‹¹ ìˆ˜ë¡œ ì €ì¥</span>
	<span class="n">page</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"page"</span><span class="o">));</span>
<span class="o">}</span><span class="k">else</span> <span class="o">{</span>
	<span class="n">page</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>	<span class="c1">// ì²˜ìŒìœ¼ë¡œ "ì „ì²´ ê²Œì‹œë¬¼" a íƒœê·¸ë¥¼ í´ë¦­í•œ ê²½ìš° 1ë¡œ ì €ì¥</span>
<span class="o">}</span>

<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì—ì„œ ì‹œì‘ ë²ˆí˜¸</span>
<span class="kt">int</span> <span class="n">startNo</span> <span class="o">=</span> <span class="o">(</span><span class="n">page</span> <span class="o">*</span> <span class="n">rowsize</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="n">rowsize</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
		
<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì—ì„œ ë§ˆì§€ë§‰ ë²ˆí˜¸</span>
<span class="kt">int</span> <span class="n">endNo</span> <span class="o">=</span> <span class="o">(</span><span class="n">page</span> <span class="o">*</span> <span class="n">rowsize</span><span class="o">);</span>
		
<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì˜ ì‹œì‘ ë¸”ëŸ­ </span>
<span class="kt">int</span> <span class="n">startBlock</span> <span class="o">=</span> <span class="o">(((</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="n">block</span><span class="o">)</span> <span class="o">*</span> <span class="n">block</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
		
<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ë¸”ëŸ­</span>
<span class="kt">int</span> <span class="n">endBlock</span> <span class="o">=</span> <span class="o">(((</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="n">block</span><span class="o">)</span> <span class="o">*</span> <span class="n">block</span><span class="o">)</span> <span class="o">+</span> <span class="n">block</span><span class="o">;</span>
</code></pre></div></div>

<p><br /></p>

<p>2) ì „ì²´ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. <br />
BoardDAO ì—ì„œ ì»¤ë„¥íŠ¸í’€ ë°©ì‹ìœ¼ë¡œ DBì™€ ì—°ë™í•œ í›„,<br />
BoardDAO ì˜ ë©”ì„œë“œ getListCount()ë¥¼ í˜¸ì¶œí•˜ì—¬ ì „ì²´ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ totalRecord ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 2) ì „ì²´ ê²Œì‹œë¬¼ ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œ</span>
<span class="nc">BoardDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="nc">BoardDAO</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
		
<span class="c1">// DBìƒì˜ ì „ì²´ ê²Œì‹œë¬¼ì˜ ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ</span>
<span class="n">totalRecord</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">getListCount</span><span class="o">();</span>
</code></pre></div></div>

<p><br /></p>

<p>3) ì „ì²´ í˜ì´ì§€ ìˆ˜ë¥¼ êµ¬í•œë‹¤. <br />
ì „ì²´ ê²Œì‹œë¬¼ì˜ ìˆ˜ë¥¼ í•œ í˜ì´ì§€ë‹¹ ë³´ì—¬ì§ˆ ê²Œì‹œë¬¼ì˜ ìˆ˜ë¡œ ë‚˜ëˆ„ë©´ ì „ì²´ í˜ì´ì§€ ìˆ˜ê°€ ë‚˜ì˜¨ë‹¤.<br />
ì´ ë•Œ, ë‚˜ë¨¸ì§€ê°€ ìˆë‹¤ë©´ ë°˜ë“œì‹œ í˜ì´ì§€ ìˆ˜ë¥¼ +1 í•œë‹¤.<br />
ê²Œì‹œë¬¼ ìˆ˜ê°€ rowsizeë³´ë‹¤ ì‘ë”ë¼ë„(=ë‚˜ë¨¸ì§€) ë¸”ëŸ­ í•˜ë‚˜ë¥¼ ì°¨ì§€í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 3) ì „ì²´ í˜ì´ì§€ ìˆ˜ êµ¬í•˜ê¸°</span>
<span class="c1">// Math.ceil() : ë‚˜ë¨¸ì§€ê°€ ìˆìœ¼ë©´ ë¬´ì¡°ê±´ ì˜¬ë¦¼í•˜ëŠ” ë©”ì„œë“œ</span>
<span class="n">allPage</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)(</span><span class="nc">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">totalRecord</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span><span class="n">rowsize</span><span class="o">));</span> 
		
<span class="c1">// ë§ˆì§€ë§‰ ë¸”ëŸ­ ìˆ˜ë¥¼ ìµœëŒ€ ì „ì²´ í˜ì´ì§€ ìˆ˜ê¹Œì§€ë¡œ ì§€ì •.</span>
<span class="k">if</span><span class="o">(</span><span class="n">endBlock</span> <span class="o">&gt;</span> <span class="n">allPage</span><span class="o">)</span> <span class="o">{</span>	
	<span class="n">endBlock</span> <span class="o">=</span> <span class="n">allPage</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<p>4) í˜ì´ì§€ì— í•´ë‹¹ë˜ëŠ” ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 4) í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ í˜¸ì¶œ</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">BoardDTO</span><span class="o">&gt;</span> <span class="n">pageList</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">getBoardList</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="n">rowsize</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<p>5) í˜ì´ì§• ì²˜ë¦¬ ì‹œ ì‘ì—…í–ˆë˜ ê°’ë“¤ì„ view í˜ì´ì§€ë¡œ ë„˜ê¸´ë‹¤. <br />
ì‘ì—…í–ˆë˜ ëª¨ë“  ê°’ë“¤ì„ í‚¤ë¡œ ì €ì¥í•´ì„œ view í˜ì´ì§€ë¡œ ë„˜ê¸´ë‹¤.<br />
requestì˜ Attributeì— setí•˜ë©´ FrontControllerì—ì„œ view í˜ì´ì§€ë¡œ ì´ë™í•˜ë©° í•¨ê»˜ ë„˜ì–´ê°„ë‹¤.<br />
view í˜ì´ì§€ì—ì„œ í™œìš©ë˜ì§€ ì•Šë”ë¼ë„ ìš°ì„  ë„˜ê²¨ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 5) ì‘ì—…í–ˆë˜ ê°’ë“¤ì„ í‚¤ë¡œ ì €ì¥í•˜ì—¬ view í˜ì´ì§€ë¡œ ë„˜ê¸°ê¸°</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"page"</span><span class="o">,</span> <span class="n">page</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"rowsize"</span><span class="o">,</span> <span class="n">rowsize</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"block"</span><span class="o">,</span> <span class="n">block</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"totalRecord"</span><span class="o">,</span> <span class="n">totalRecord</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"allPage"</span><span class="o">,</span> <span class="n">allPage</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"startNo"</span><span class="o">,</span> <span class="n">startNo</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"endNo"</span><span class="o">,</span> <span class="n">endNo</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"startBlock"</span><span class="o">,</span> <span class="n">startBlock</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"endBlock"</span><span class="o">,</span> <span class="n">endBlock</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="n">pageList</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="4-daogetboardlist">4. dao.getBoardList()</h2>
<p>BoardDAO í´ë˜ìŠ¤ì—ì„œ getBoardList() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</p>

<p>sqlë¬¸ ì‘ì„±ì— ì£¼ì˜.</p>

<p align="center"><img src="../assets/img/images/210517/02.png" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from "</span>
		<span class="o">+</span> <span class="s">"(select row_number() over(order by board_no desc) rnum, b.* from board b) "</span>
		<span class="o">+</span> <span class="s">"where rnum &gt;= ? and rnum &lt;= ?"</span><span class="o">;</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">row_number()</code> : ì›í•˜ëŠ” ì»¬ëŸ¼ë§Œ ì •ë ¬í•´ì„œ ìˆœì„œë¥¼ ì •í•˜ê±°ë‚˜, ì›í•˜ëŠ” ê³³ì—ì„œ êµ¬ì—­ì„ ë‚˜ëˆ  ìˆœì„œë¥¼ ì •í•˜ëŠ” ëª…ë ¹ì–´. ì—¬ê¸°ì„  ì „ìì˜ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆë‹¤.
    <ul>
      <li>row_number() over(order by ~ )</li>
      <li>row_number() over(partition by ~ order by ~)</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">over()</code> : ë¶„ì„í•¨ìˆ˜ì™€ ì§‘ê³„í•¨ìˆ˜ë¥¼ GROUP BY ë˜ëŠ” ì„œë¸Œì¿¼ë¦¬ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëª…ë ¹ì–´.
    <ul>
      <li>ë¶„ì„í•¨ìˆ˜ : <code class="language-plaintext highlighter-rouge">SUM</code>, <code class="language-plaintext highlighter-rouge">MAX</code>, <code class="language-plaintext highlighter-rouge">COUNT</code> ë“±</li>
      <li>ì§‘ê³„í•¨ìˆ˜ : <code class="language-plaintext highlighter-rouge">GROUP BY</code>, <code class="language-plaintext highlighter-rouge">ORDER BY</code> ë“±</li>
    </ul>
  </li>
</ul>

<p>ì´í•˜ getBoardList() ë©”ì„œë“œ ì „ì²´.<br />
sqlë¬¸ì„ ì œì™¸í•˜ê³¤ ê¸°ì¡´ì˜ ì „ì²´ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ê³¼ ê±°ì˜ ë™ì¼í•˜ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// board í…Œì´ë¸”ì—ì„œ ê²Œì‹œë¬¼ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">BoardDTO</span><span class="o">&gt;</span> <span class="nf">getBoardList</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">,</span> <span class="kt">int</span> <span class="n">rowsize</span><span class="o">){</span>
		
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">BoardDTO</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">BoardDTO</span><span class="o">&gt;();</span>	<span class="c1">// DBì—ì„œ ë¶ˆëŸ¬ì˜¬ ë°ì´í„°ë¥¼ ì €ì¥í•  list ì„ ì–¸</span>
			
	<span class="kt">int</span> <span class="n">startNo</span> <span class="o">=</span> <span class="o">(</span><span class="n">page</span> <span class="o">*</span> <span class="n">rowsize</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="n">rowsize</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>	<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì—ì„œ ì‹œì‘ ë²ˆí˜¸</span>
	<span class="kt">int</span> <span class="n">endNo</span> <span class="o">=</span> <span class="o">(</span><span class="n">page</span> <span class="o">*</span> <span class="n">rowsize</span><span class="o">);</span>							<span class="c1">// í•´ë‹¹ í˜ì´ì§€ì—ì„œ ë§ˆì§€ë§‰ ë²ˆí˜¸</span>
		
	<span class="k">try</span> <span class="o">{</span>
		<span class="n">openConn</span><span class="o">();</span>
		<span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from "</span>
			<span class="o">+</span> <span class="s">"(select row_number() over(order by board_no desc) rnum, b.* from board b) "</span>
			<span class="o">+</span> <span class="s">"where rnum &gt;= ? and rnum &lt;= ?"</span><span class="o">;</span>
		<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">startNo</span><span class="o">);</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">endNo</span><span class="o">);</span>
			
		<span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
		<span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
			<span class="nc">BoardDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BoardDTO</span><span class="o">();</span>
			
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_no</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"board_no"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_writer</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"board_writer"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_title</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"board_title"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_cont</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"board_cont"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_pwd</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"board_pwd"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_hit</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"board_hit"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_regdate</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"board_regdate"</span><span class="o">));</span>
				
			<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>
		<span class="o">}</span>
			
		<span class="c1">// open ê°ì²´ ë‹«ê¸°</span>
		<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">con</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// TODO Auto-generated catch block</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
		<span class="k">return</span> <span class="n">list</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="5-board_listjsp">5. board_list.jsp</h2>
<p>ìœ„ì—ì„œ ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì €ì¥ëœ í‚¤ ê°’ê³¼ í•¨ê»˜ FrontControllerì—ì„œ ì„¤ì •í–ˆë˜ í˜ì´ì§€ ì£¼ì†Œë¡œ ì´ë™í•œë‹¤.<br />
ê°€ì ¸ì˜¨ ê°’ë“¤ì„ ì›¹ í˜ì´ì§€ì— ì¶œë ¥í•œë‹¤.<br />
ê²Œì‹œê¸€ ëª©ë¡ ì¶œë ¥ì€ ì´ì „ì— ë‹¤ë£¨ì—ˆìœ¼ë¯€ë¡œ ì—¬ê¸°ì„  í˜ì´ì§• ì¶œë ¥ë§Œ ì •ë¦¬í•œë‹¤.</p>

<p>ëª¨ë‘ &lt;body&gt; íƒœê·¸ ì•ˆì— ì‘ì„±í•œë‹¤.</p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;%-- ELì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ taglibì„ ì„ ì–¸í•œë‹¤. --%&gt;</span>
<span class="nt">&lt;%@ taglib </span><span class="na">prefix=</span><span class="s">"c"</span><span class="na"> uri=</span><span class="s">"http://java.sun.com/jsp/jstl/core"</span> <span class="nt">%&gt;</span>

<span class="c">&lt;%-- í˜„ì¬ í˜ì´ì§€ê°€ ë¸”ëŸ­ ìˆ˜ë³´ë‹¤ ë†’ë‹¤ë©´ (ì˜ˆ: í˜„ì¬í˜ì´ì§€-5, ë¸”ëŸ­ ìˆ˜-3) --%&gt;</span>
<span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">page</span> <span class="o">&gt;</span> <span class="n">block</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
	<span class="c">&lt;%-- â—€â—€ ë¥¼ ëˆ„ë¥´ë©´ ì²« í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤. --%&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"board_list.do?page=1"</span><span class="nt">&gt;</span>â—€â—€<span class="nt">&lt;/a&gt;</span>
	
	<span class="c">&lt;%-- â—€ë¥¼ ëˆ„ë¥´ë©´ í˜„ì¬ í˜ì´ì§€ì˜ ì‹œì‘ ë¸”ë¡ë³´ë‹¤ í•˜ë‚˜ ì‘ì€ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤. 
	&lt;%--(ì˜ˆ: [4][5][6]ì¼ ë•Œ, â—€ë¥¼ í´ë¦­ ì‹œ [3]ìœ¼ë¡œ ì´ë™) --%&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"board_list.do?page=${startBlock - 1 }"</span><span class="nt">&gt;</span>â—€<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/c:if&gt;</span>
		
<span class="c">&lt;%-- ì‹œì‘ë¸”ë¡ë¶€í„° ë§ˆì§€ë§‰ë¸”ë¡ê¹Œì§€ ê°ê° ë°˜ë³µí•œë‹¤. (ì˜ˆ: [4][5][6] ê°ê° ì‘ì„±) --%&gt;</span>
<span class="nt">&lt;c:forEach </span><span class="na">begin=</span><span class="s">"</span><span class="si">${</span><span class="n">startBlock</span> <span class="si">}</span><span class="s">"</span><span class="na"> end=</span><span class="s">"</span><span class="si">${</span><span class="n">endBlock</span> <span class="si">}</span><span class="s">"</span><span class="na"> var=</span><span class="s">"i"</span><span class="nt">&gt;</span>

	 <span class="c">&lt;%-- í˜„ì¬ í˜ì´ì§€ëŠ” ë³¼ë“œ ì²˜ë¦¬í•œë‹¤. --%&gt;</span>
	<span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">i</span> <span class="o">==</span> <span class="n">page</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;b&gt;&lt;a</span> <span class="na">href=</span><span class="s">"board_list.do?page=${i }"</span><span class="nt">&gt;</span>[${i }]<span class="nt">&lt;/a&gt;&lt;/b&gt;</span>
	<span class="nt">&lt;/c:if&gt;</span>
			
	<span class="c">&lt;%-- í˜„ì¬ í˜ì´ì§€ê°€ ì•„ë‹ˆë¼ë©´ ë³¼ë“œì²˜ë¦¬í•˜ì§€ ì•Šê³  ì¶œë ¥í•œë‹¤. --%&gt;</span>
	<span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">i</span> <span class="o">!=</span> <span class="n">page</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"board_list.do?page=${i }"</span><span class="nt">&gt;</span>[${i }]<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/c:if&gt;</span>
<span class="nt">&lt;/c:forEach&gt;</span>
		
<span class="c">&lt;%-- ë§ˆì§€ë§‰ ë¸”ë¡ì´ ì „ì²´ í˜ì´ì§€ë³´ë‹¤ ì‘ìœ¼ë©´ (ì˜ˆ: ì „ì²´í˜ì´ì§€-[7] í˜„ì¬-[4][5][6] ë§ˆì§€ë§‰ í˜ì´ì§€-[6]) --%&gt;</span>
<span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">endBlock</span> <span class="o">&lt;</span> <span class="n">allPage</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
	<span class="c">&lt;%-- â–¶ í´ë¦­ ì‹œ ë§ˆì§€ë§‰ ë¸”ë¡ë³´ë‹¤ í•˜ë‚˜ í° í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤. --%&gt;</span>
	<span class="c">&lt;%-- (ì˜ˆ: [4][5][6] ì¼ ë•Œ â–¶ í´ë¦­ ì‹œ [7]ë¡œ ì´ë™)
	&lt;a href="board_list.do?page=${endBlock + 1 }"&gt;â–¶&lt;/a&gt;
	
	&lt;%-- â–¶â–¶ í´ë¦­ì‹œ ë§ˆì§€ë§‰ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤. --%&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"board_list.do?page=${allPage }"</span><span class="nt">&gt;</span>â–¶â–¶<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/c:if&gt;</span>
</code></pre></div></div>

:ET