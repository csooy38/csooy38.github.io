I"çF<h1 id="jspì™€-db-ì—°ë™">JSPì™€ DB ì—°ë™</h1>

<p align="center"><img src="../assets/img/images/210506/00.gif" /></p>

<hr />
<h2 id="1-dbì˜-empí…Œì´ë¸”ì„-ì›¹-í˜ì´ì§€ì—-ì¶œë ¥í•˜ê¸°">1. DBì˜ empí…Œì´ë¸”ì„ ì›¹ í˜ì´ì§€ì— ì¶œë ¥í•˜ê¸°</h2>
<ol>
  <li>EmpDTO : DB empí…Œì´ë¸”ê³¼ ë™ì¼í•œ ë³€ìˆ˜ë¥¼ ìƒì„±.</li>
  <li>EmpDAO : DB ì ‘ì†(ì—°ë™) ê°ì²´ í´ë˜ìŠ¤. selectList() ë©”ì„œë“œ í¬í•¨.</li>
  <li>index.jsp : ê¸°ë³¸ì ì¸ í™”ë©´ì„ êµ¬ì„±.
    <ul>
      <li>[ì „ì²´ ë ˆì½”ë“œ] í´ë¦­ì‹œ select ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>select ì„œë¸”ë¦¿
    <ul>
      <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
      <li>empDAOì˜ selectList() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ EmpDTO í´ë˜ìŠ¤ì— ì €ì¥(list).</li>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ê°’ê³¼ í•¨ê»˜ select.jsp ë¡œ í˜ì´ì§€ ì´ë™.</li>
    </ul>
  </li>
  <li>select.jsp
    <ul>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ ê°’ì„ í†µí•´ ë„˜ê²¨ ë°›ì•„ ì›¹ í˜ì´ì§€ì— ì¶œë ¥.</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h3 id="-empdtojava">* EmpDTO.java</h3>
<ul>
  <li>DTO(Data Transfer Object) : ë°ì´í„° ì „ì†¡ ê°ì²´
    <ul>
      <li>ê¸°ë³¸ì ìœ¼ë¡œ DB ìƒì˜ í…Œì´ë¸”ì˜ ì»¬ëŸ¼ê³¼ ë™ì¼í•˜ê²Œ ë©¤ë²„ë³€ìˆ˜ êµ¬ì„±.</li>
    </ul>
  </li>
  <li>privateë¡œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³ , getterì™€ setterë¥¼ í†µí•´ ì ‘ê·¼í•˜ë„ë¡ í•œë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmpDTO</span> <span class="o">{</span>
	
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">empno</span><span class="o">;</span>			<span class="c1">// ì‚¬ì› ë²ˆí˜¸</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">ename</span><span class="o">;</span>			<span class="c1">// ì‚¬ì› ì´ë¦„</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">job</span><span class="o">;</span>			<span class="c1">// ë‹´ë‹¹ ì—…ë¬´</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">mgr</span><span class="o">;</span>			<span class="c1">// ê´€ë¦¬ì ì‚¬ì›ë²ˆí˜¸ </span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">hiredate</span><span class="o">;</span>		<span class="c1">// ì…ì‚¬ ì¼ì</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">sal</span><span class="o">;</span>			<span class="c1">// ì‚¬ì› ê¸‰ì—¬</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">comm</span><span class="o">;</span>			<span class="c1">// ì‚¬ì› ë³´ë„ˆìŠ¤</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">deptno</span><span class="o">;</span>			<span class="c1">// ì‚¬ì› ë¶€ì„œë²ˆí˜¸</span>
	
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getEmpno</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">empno</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmpno</span><span class="o">(</span><span class="kt">int</span> <span class="n">empno</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">empno</span> <span class="o">=</span> <span class="n">empno</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEname</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">ename</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEname</span><span class="o">(</span><span class="nc">String</span> <span class="n">ename</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">ename</span> <span class="o">=</span> <span class="n">ename</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getJob</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">job</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">job</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">job</span> <span class="o">=</span> <span class="n">job</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getMgr</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">mgr</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMgr</span><span class="o">(</span><span class="kt">int</span> <span class="n">mgr</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">mgr</span> <span class="o">=</span> <span class="n">mgr</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getHiredate</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">hiredate</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHiredate</span><span class="o">(</span><span class="nc">String</span> <span class="n">hiredate</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">hiredate</span> <span class="o">=</span> <span class="n">hiredate</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSal</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">sal</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSal</span><span class="o">(</span><span class="kt">int</span> <span class="n">sal</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">sal</span> <span class="o">=</span> <span class="n">sal</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getComm</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">comm</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setComm</span><span class="o">(</span><span class="kt">int</span> <span class="n">comm</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">comm</span> <span class="o">=</span> <span class="n">comm</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getDeptno</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">deptno</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDeptno</span><span class="o">(</span><span class="kt">int</span> <span class="n">deptno</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">deptno</span> <span class="o">=</span> <span class="n">deptno</span><span class="o">;</span>
	<span class="o">}</span>
	
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-indexjsp">* index.jsp</h3>
<ul>
  <li>ê¸°ë³¸ í™”ë©´ ì„¤ì •</li>
  <li>[ì „ì²´ ë ˆì½”ë“œ] í´ë¦­ì‹œ <code class="language-plaintext highlighter-rouge">/select</code> ë¥¼ í†µí•´ select ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">href="&lt;%=request.getContextPath() %&gt;/select"</code> = â€œí˜„ì¬ í”„ë¡œì íŠ¸ëª…/selectâ€ ë¥¼ ì£¼ì†Œê°’ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.
    <ul>
      <li>ì˜ˆ) í˜„ì¬ ì£¼ì†Œ : http://localhost:8080/example/test.jsp</li>
      <li>ì˜ˆ) <code class="language-plaintext highlighter-rouge">"&lt;%=request.getContextPath() %&gt;/select"</code> = http://localhost:8080/example/select</li>
      <li><code class="language-plaintext highlighter-rouge">select.jsp</code>ì™€ ê°™ì´ í™•ì¥ìëª…ì´ ë¶™ì§€ ì•Šìœ¼ë©´ ì„œë¸”ë¦¿ìœ¼ë¡œ ì´í•´í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;body&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"blue"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;h3&gt;</span>EMP í…Œì´ë¸” ë©”ì¸ í˜ì´ì§€<span class="nt">&lt;/h3&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"blue"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;br&gt;&lt;br&gt;</span>
		
		<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span> <span class="nt">%&gt;</span><span class="s">/select"</span><span class="nt">&gt;</span>[ì „ì²´ ë ˆì½”ë“œ]<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>
<ul>
  <li><code class="language-plaintext highlighter-rouge">request.getContextPath()</code> : í˜„ì¬ í”„ë¡œì íŠ¸ëª…ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œ.</li>
</ul>

<p align="center"><img src="../assets/img/images/210506/00.png" /></p>

<p><br /></p>

<h3 id="-select-ì„œë¸”ë¦¿">* select ì„œë¸”ë¦¿</h3>
<ul>
  <li>service ë©”ì†Œë“œë§Œ ì²´í¬í•˜ì—¬ ì„œë¸”ë¦¿ì„ ìƒì„±í•˜ì˜€ë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/select"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SelectServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
       
    
	<span class="kd">public</span> <span class="nf">SelectServlet</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
    	<span class="o">}</span>

	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

		<span class="c1">// DBì— ì ‘ì†ì„ í•´ì„œ EMP í…Œì´ë¸”ì˜ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…(ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§)</span>
		<span class="c1">// ê°€ì ¸ì˜¨ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ View pageë¡œ ë„˜ê²¨ì£¼ëŠ” ì‘ì—…</span>
		<span class="c1">// EmpDAO ê°ì²´ì˜ `dao` ë¼ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ `selectList()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</span>
		<span class="nc">EmpDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDAO</span><span class="o">();</span>
		
		<span class="c1">// DB EMP í…Œì´ë¸”ì—ì„œ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•˜ëŠ” ì‘ì—…</span>
		<span class="c1">// `selectList()` ë©”ì„œë“œ í˜¸ì¶œ ê²°ê³¼ `list`ì˜ ì£¼ì†Œê°’ì´ `allList`ì— ì €ì¥ëœë‹¤.</span>
		<span class="c1">// ì´ ë•Œ, `dao.selectList()`ë¡œ ë¦¬í„´ë˜ëŠ” ê°’ì´ `List&lt;EmpDTO&gt;` í˜•íƒœì´ë¯€ë¡œ ë™ì¼í•˜ê²Œ ì§€ì •í•œë‹¤.		</span>
		<span class="nc">List</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="o">&gt;</span> <span class="n">allList</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">selectList</span><span class="o">();</span>
		
		<span class="c1">// call by referenceë¡œ í˜¸ì¶œë˜ëŠ” í˜•íƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì†Œê°’ì„ ì¶œë ¥í•´ë³¸ë‹¤.</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"allList &gt;&gt;&gt; "</span> <span class="o">+</span> <span class="n">allList</span><span class="o">);</span>
		
		<span class="c1">// í˜ì´ì§€ ì´ë™ ì‹œ ë°ì´í„°ë¥¼ ê°™ì´ ì´ë™ì‹œí‚¤ì.</span>
		<span class="c1">// `allList`ë¥¼ `request.setAttribute()`ë¥¼ í™œìš©í•˜ì—¬ `"List"`ë¼ëŠ” í‚¤ì— ì €ì¥í•œë‹¤.</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="n">allList</span><span class="o">);</span>
		
		<span class="c1">// í˜ì´ì§€ ì´ë™</span>
		<span class="c1">// ì €ì¥í•œ í‚¤&amp;ë°ì´í„°ì™€ í•¨ê»˜ `select.jsp`ë¡œ í˜ì´ì§€ ì´ë™í•œë‹¤.</span>
		<span class="nc">RequestDispatcher</span> <span class="n">rd</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"select.jsp"</span><span class="o">);</span>
		<span class="n">rd</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>	<span class="c1">// ì‹¤ì§ˆì ìœ¼ë¡œ í˜ì´ì§€ ì´ë™				</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-empdaojava">* EmpDAO.java</h3>
<ul>
  <li>DAO(Data Access Object) : ë°ì´í„° ì ‘ê·¼ ê°ì²´ ==&gt; DBì— ì ‘ì†(ì—°ë™)í•˜ëŠ” ê°ì²´.
    <ul>
      <li>DAOë€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•´ì„œ ë°ì´í„° ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ, ì¡°íšŒ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í´ë˜ìŠ¤.</li>
      <li>ì¼ë°˜ì ìœ¼ë¡œ JSP ë˜ëŠ” Servletì—ì„œ ìœ„ì˜ ì‘ì—…ë“¤ì„ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ìœ ì§€ë³´ìˆ˜, ì½”ë“œì˜ ëª¨ë“ˆí™”ë¥¼ ìœ„í•´ì„œ DAO í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmpDAO</span> <span class="o">{</span>
	
	<span class="nc">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>				<span class="c1">// DBì™€ ì—°ê²°í•˜ëŠ” ê°ì²´</span>
	<span class="nc">PreparedStatement</span> <span class="n">pstmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> 		<span class="c1">// DBì— SQLë¬¸ì„ ì „ì†¡í•˜ëŠ” ê°ì²´</span>
	<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>				<span class="c1">// SQLë¬¸ì„ ì‹¤í–‰ í›„ ê²°ê³¼ê°’ì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´</span>
	<span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>				<span class="c1">// ì¿¼ë¦¬ë¬¸ì„ ì €ì¥í•  ê°ì²´</span>
	
	<span class="c1">// ê¸°ë³¸ ìƒì„±ìë¥¼ í†µí•´ ì˜¤ë¼í´DBì™€ ì—°ê²°í•œë‹¤.</span>
	<span class="kd">public</span> <span class="nf">EmpDAO</span><span class="o">()</span> <span class="o">{</span>	<span class="c1">// ê¸°ë³¸ ìƒì„±ì</span>
		
		<span class="nc">String</span> <span class="n">driver</span> <span class="o">=</span> <span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="o">;</span>
		<span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"jdbc:oracle:thin:@localhost:1521:XE"</span><span class="o">;</span>
		<span class="nc">String</span> <span class="n">user</span> <span class="o">=</span> <span class="s">"web"</span><span class="o">;</span>
		<span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"1234"</span><span class="o">;</span>
		
		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">// 1ë‹¨ê³„ : ì˜¤ë¼í´ ë“œë¼ì´ë²„ ë¡œë”©</span>
			<span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">driver</span><span class="o">);</span>
			
			<span class="c1">// 2ë‹¨ê³„ : DB(ì˜¤ë¼í´)ì™€ ì—°ê²°</span>
			<span class="n">con</span> <span class="o">=</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">user</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>			
			
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span> <span class="c1">// ê¸°ë³¸ ìƒì„±ì end</span>

	<span class="c1">// DB EMP í…Œì´ë¸”ì—ì„œ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œ</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="o">&gt;</span> <span class="nf">selectList</span><span class="o">()</span> <span class="o">{</span>
	
		<span class="c1">// ë¶€ëª¨ ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ ìì‹ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.(ë‹¤í˜•ì„±) </span>
		<span class="nc">List</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="o">&gt;();</span>	
		
		<span class="c1">// call by referenceë¡œ í˜¸ì¶œë˜ëŠ” í˜•íƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì†Œê°’ì„ ì¶œë ¥í•´ë³¸ë‹¤.</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"selectList() ë©”ì„œë“œì—ì„œ list &gt;&gt;&gt; "</span> <span class="o">+</span> <span class="n">list</span><span class="o">);</span>		
					
		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">// empnoë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ emp ëª©ë¡ì„ ì „ì²´ ì¶œë ¥í•˜ëŠ” sqlë¬¸ì„ ì‘ì„±í•œë‹¤.</span>
			<span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from emp order by empno desc"</span><span class="o">;</span>
			<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			<span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
			<span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
			
				<span class="c1">// dto ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ dbì˜ ë°ì´í„°ë¥¼ EmpDTOì— ì €ì¥í•œë‹¤.</span>
				<span class="nc">EmpDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDTO</span><span class="o">();</span>
				
				<span class="n">dto</span><span class="o">.</span><span class="na">setEmpno</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"empno"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setEname</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"ename"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setJob</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"job"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setMgr</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"mgr"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setHiredate</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"hiredate"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setSal</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"sal"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setComm</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"comm"</span><span class="o">));</span>
				<span class="n">dto</span><span class="o">.</span><span class="na">setDeptno</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"deptno"</span><span class="o">));</span>
				
				<span class="c1">// listì— dtoì˜ ì£¼ì†Œê°’ì„ ì €ì¥í•œë‹¤.</span>
				<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>
			<span class="o">}</span>
			
			<span class="c1">// open ê°ì²´ ë‹«ê¸°</span>
			<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">con</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>	
			
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ë°ì´í„°  ì™„ë£Œ"</span><span class="o">);</span>
		
		<span class="c1">// call by referenceë¡œ í˜¸ì¶œë˜ëŠ” í˜•íƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì†Œê°’ì„ ì¶œë ¥í•´ë³¸ë‹¤.</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"selectList() ë©”ì„œë“œì—ì„œ list &gt;&gt;&gt; "</span> <span class="o">+</span> <span class="n">list</span><span class="o">);</span>
		
		<span class="c1">// listë¥¼ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ë°˜í™˜í•œë‹¤. </span>
		<span class="k">return</span> <span class="n">list</span><span class="o">;</span>		
	<span class="o">}</span> <span class="c1">// selectList() ë©”ì„œë“œ end	</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-selectjsp">* select.jsp</h3>
<ul>
  <li>EmpDAOì˜ listì˜ ì£¼ì†Œê°’<br />
  = select ì„œë¸”ë¦¿ì˜ allListì˜ ì£¼ì†Œê°’<br />
  = select.jspì˜ empì˜ ì£¼ì†Œê°’<br />
  = select.jsp bodyíƒœê·¸ ë‚´ dtoì˜ ì£¼ì†Œê°’</li>
  <li>ì°¸ì¡°ë³€ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ì£¼ì†Œê°’ì„ ë„˜ê²¨ì£¼ì—ˆìœ¼ë¯€ë¡œ ëª¨ë‘ ê°™ì€ ì£¼ì†Œê°’ì„ ê³µìœ í•œë‹¤.</li>
  <li>ë”°ë¼ì„œ í•˜ë‚˜ì˜ ë°ì´í„°ê°€ ë³€ê²½ë˜ì–´ë„ ëª¨ë“  ë°ì´í„°ê°€ ë™ì¼í•˜ê²Œ ë³€ê²½ëœë‹¤.</li>
</ul>

<p>ê°ê°ì˜ ì£¼ì†Œê°’ì„ ì¶œë ¥í–ˆì„ ë•Œ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥ëœë‹¤.<br />
ê¸¸ì–´ì„œ ìƒëµí–ˆì§€ë§Œ ë™ì¼í•œ ì£¼ì†Œê°’ì´ ë°˜ë³µë˜ì–´ ì¶œë ¥ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>
<p align="center"><img src="../assets/img/images/210506/06.png" /></p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;%</span>
	<span class="c1">// select ì„œë¸”ë¦¿ì—ì„œ ë³´ë‚¸ allListì˜ ì£¼ì†Œê°’ë¥¼ Listë¥¼ í‚¤ê°’ìœ¼ë¡œ í•˜ì—¬ empë¡œ ì €ì¥í•œë‹¤.</span>
	<span class="c1">// allListì—ëŠ” EmpDAOì˜ listì˜ ì£¼ì†Œê°’ì´ ì €ì¥ë˜ì–´ìˆìœ¼ë¯€ë¡œ, </span>
	<span class="c1">// EmpDAOì˜ listì˜ ì£¼ì†Œê°’ì„ empì— ì €ì¥í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.</span>
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="err">&gt;</span> <span class="n">emp</span> <span class="o">=</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">EmpDTO</span><span class="err">&gt;</span><span class="o">)</span> <span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"List"</span><span class="o">);</span>
	
	<span class="c1">// call by referenceë¡œ í˜¸ì¶œë˜ëŠ” í˜•íƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì†Œê°’ì„ ì¶œë ¥í•´ë³¸ë‹¤.</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="err">"</span><span class="n">emp</span> <span class="err">&gt;&gt;&gt;</span> <span class="err">"</span> <span class="o">+</span> <span class="n">emp</span><span class="o">);</span>
<span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Insert title here<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h3&gt;</span>EMP í…Œì´ë¸” ì „ì²´ ë ˆì½”ë“œ ë¦¬ìŠ¤íŠ¸<span class="nt">&lt;/h3&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;br&gt;</span> <span class="nt">&lt;br&gt;</span>

		<span class="nt">&lt;table</span> <span class="na">border=</span><span class="s">"1"</span> <span class="na">cellspacing=</span><span class="s">"0"</span> <span class="na">width=</span><span class="s">"650"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;tr&gt;</span>
				<span class="nt">&lt;th&gt;</span>ì‚¬  ë²ˆ<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ì´  ë¦„<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span> ë‹´ë‹¹ì—…ë¬´<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ê´€ë¦¬ìNo.<span class="nt">&lt;/th&gt;</span>
				<span class="nt">&lt;th&gt;</span>ê¸‰  ì—¬<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ë³´ë„ˆìŠ¤<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ë¶€ì„œë²ˆí˜¸<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ì…ì‚¬ì¼ì<span class="nt">&lt;/th&gt;</span>				
			<span class="nt">&lt;/tr&gt;</span>
			<span class="nt">&lt;%</span>
				<span class="k">if</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>	<span class="c1">// ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°</span>
					<span class="c1">// ë°ì´í„° ìˆ˜ë§Œí¼ ë°˜ë³µí•´ì„œ ì¶œë ¥</span>
					<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">emp</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
						<span class="c1">// dto ì°¸ì¡°ë³€ìˆ˜ì— emp ê°ê°ì˜ ì£¼ì†Œê°’ ì €ì¥</span>
						<span class="nc">EmpDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="n">emp</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
						
						<span class="c1">// call by referenceë¡œ í˜¸ì¶œë˜ëŠ” í˜•íƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì£¼ì†Œê°’ì„ ì¶œë ¥í•´ë³¸ë‹¤.</span>
						<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="err">"</span><span class="n">dto</span> <span class="err">&gt;&gt;&gt;</span> <span class="err">"</span> <span class="o">+</span> <span class="n">dto</span><span class="o">);</span>
			<span class="nt">%&gt;</span>
					
			<span class="nt">&lt;tr&gt;</span>
				<span class="c">&lt;%-- dtoì— ì €ì¥ëœ ì£¼ì†Œê°’ì„ í†µí•˜ì—¬ ë°ì´í„° í˜¸ì¶œ --%&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getEmpno</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getEname</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getJob</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getMgr</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getSal</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getComm</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getDeptno</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getHiredate</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span> <span class="nt">%&gt;&lt;/td&gt;</span>
			<span class="nt">&lt;/tr&gt;</span>
	
			<span class="nt">&lt;%</span> <span class="o">}</span> <span class="c1">// forë¬¸ end</span>
				<span class="o">}</span><span class="k">else</span> <span class="o">{</span> <span class="c1">// ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°				</span>
			<span class="nt">%&gt;</span>
			<span class="nt">&lt;tr&gt;</span>
				<span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"8 align="</span><span class="na">center</span><span class="err">"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;h3&gt;</span>ê²€ìƒ‰ëœ ë ˆì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.<span class="nt">&lt;/h3&gt;</span>
				<span class="nt">&lt;/td&gt;</span>
			<span class="nt">&lt;/tr&gt;</span>
			<span class="nt">&lt;%</span><span class="o">}</span><span class="nt">%&gt;</span>
		<span class="nt">&lt;/table&gt;</span>
	<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><br /></p>

<ul>
  <li>DBì˜ emp í…Œì´ë¸”</li>
</ul>
<p align="center"><img src="../assets/img/images/210506/07.png" /></p>

<p><br /></p>

<ul>
  <li>JSPë¡œ ì—°ë™í•˜ì—¬ ì›¹ í˜ì´ì§€ë¡œ ì¶œë ¥í•œ emp í…Œì´ë¸”</li>
</ul>
<p align="center"><img src="../assets/img/images/210506/01.png" /></p>

<p><br /></p>

<hr />
<h2 id="2-dbì˜-empí…Œì´ë¸”ì—-ìƒˆë¡œìš´-ë ˆì½”ë“œ-ì¶”ê°€í•˜ê¸°">2. DBì˜ empí…Œì´ë¸”ì— ìƒˆë¡œìš´ ë ˆì½”ë“œ ì¶”ê°€í•˜ê¸°</h2>
<ol>
  <li>EmpDTO í´ë˜ìŠ¤ : DB emp í…Œì´ë¸”ê³¼ ë™ì¼í•œ ë³€ìˆ˜ ìƒì„±.</li>
  <li>deptDTO í´ë˜ìŠ¤ : DB dept í…Œì´ë¸”ê³¼ ë™ì¼í•œ ë³€ìˆ˜ ìƒì„±.</li>
  <li>EmpDAO í´ë˜ìŠ¤ : DB ì ‘ì†(ì—°ë™) ê°ì²´ í´ë˜ìŠ¤. selectList() insertEmp() ë©”ì„œë“œ í¬í•¨.</li>
  <li>index.jsp : ê¸°ë³¸ì ì¸ í™”ë©´ì„ êµ¬ì„±.
    <ul>
      <li>[ì „ì²´ ë ˆì½”ë“œ] í´ë¦­ì‹œ select ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>select ì„œë¸”ë¦¿
    <ul>
      <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
      <li>empDAOì˜ selectList() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ EmpDTO í´ë˜ìŠ¤ì— ì €ì¥(list).</li>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ê°’ê³¼ í•¨ê»˜ select.jsp ë¡œ í˜ì´ì§€ ì´ë™.</li>
    </ul>
  </li>
  <li>select.jsp
    <ul>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ ê°’ì„ í†µí•´ ë„˜ê²¨ ë°›ì•„ ì›¹ í˜ì´ì§€ì— ì¶œë ¥.</li>
      <li>[ì‚¬ì› ì¶”ê°€] í´ë¦­ ì‹œ insert ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>insert ì„œë¸”ë¦¿
    <ul>
      <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
      <li>empDAOì˜ insertEmp() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œ í›„ empDTO í´ë˜ìŠ¤ì— ì €ì¥(list).</li>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ ê°’ê³¼ í•¨ê»˜ insertForm.jsp ë¡œ í˜ì´ì§€ ì´ë™.</li>
    </ul>
  </li>
  <li>insertForm.jsp
    <ul>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ ê°’ê³¼ í•¨ê»˜ ë„˜ê²¨ ë°›ì•„ ì €ì¥.</li>
      <li>ì›¹ í˜ì´ì§€ì—ì„œ ë°ì´í„° ì…ë ¥ í›„ [ì‚¬ì› ë“±ë¡] í´ë¦­ ì‹œ insertOK ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>insertOK ì„œë¸”ë¦¿
    <ul>
      <li>insertForm ì—ì„œ ë„˜ì–´ ì˜¨ ë°ì´í„°ë¥¼ DBì— ì €ì¥.</li>
      <li>DBì— ë°ì´í„° ì¶”ê°€ ì„±ê³µ ì‹œ select ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ê°€ ì¶”ê°€ëœ í…Œì´ë¸” ì¡°íšŒ.</li>
      <li>DBì— ë°ì´í„° ì¶”ê°€ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥ í›„ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™.</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h3 id="-selectjsp-1">* select.jsp</h3>
<ul>
  <li>[ì‚¬ì› ì¶”ê°€] ë¥¼ ëˆ„ë¥´ë©´ insert ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™í•œë‹¤.</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span> <span class="nt">%&gt;</span><span class="s">/insert"</span><span class="nt">&gt;</span>[ì‚¬ì› ì¶”ê°€]<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-insertservlet">* InsertServlet</h3>
<ul>
  <li>service ë©”ì„œë“œë¡œ ì„œë¸”ë¦¿ì„ ìƒì„±í•˜ì˜€ë‹¤.</li>
  <li>EmpDAOì˜ deptList() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¦¬í„´ê°’ìœ¼ë¡œ listì˜ ì£¼ì†Œê°’ì„ ë°›ê³  insertForm.jsp ë¡œ í˜ì´ì§€ ì´ë™í•œë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/insert"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InsertServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>       
    
	<span class="kd">public</span> <span class="nf">InsertServlet</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>	
	
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="c1">// ì‚¬ì› ì¶”ê°€í¼ìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— ê´€ë¦¬ì ë¦¬ìŠ¤íŠ¸ì™€ ë¶€ì„œë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ë¥¼ </span>
		<span class="c1">// DBì—ì„œ ì¡°íšŒí•˜ì—¬ ì‚¬ì› ì¶”ê°€í¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë„˜ê²¨ì¤€ë‹¤.</span>
		<span class="nc">EmpDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDAO</span><span class="o">();</span>
		
		<span class="c1">// ë¶€ì„œ í…Œì´ë¸” ì „ì²´ ë¦¬ìŠ¤íŠ¸ ë©”ì„œë“œ í˜¸ì¶œ</span>
		<span class="c1">// EmpDAOì˜ deptList() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë°›ì€ ë¦¬í„´ê°’(ì£¼ì†Œê°’)ì„ List ì°¸ì¡°ë³€ìˆ˜ì¸ deptListì— ì €ì¥í•œë‹¤.</span>
		<span class="nc">List</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="o">&gt;</span> <span class="n">deptList</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">deptList</span><span class="o">();</span>
		
		<span class="c1">// ì£¼ì†Œê°’ì„ "dept"ë¼ëŠ” í‚¤ì™€ í•¨ê»˜ ì €ì¥í•œë‹¤.</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"dept"</span><span class="o">,</span> <span class="n">deptList</span><span class="o">);</span>
		
		<span class="c1">// í˜ì´ì§€ ì´ë™</span>
		<span class="c1">// ì €ì¥ëœ ì£¼ì†Œê°’ì„ í‚¤ì™€ í•¨ê»˜ insertForm.jsp í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.</span>
		<span class="nc">RequestDispatcher</span> <span class="n">rd</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"insertForm.jsp"</span><span class="o">);</span>
		<span class="n">rd</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
		
	<span class="o">}</span> <span class="c1">// service ë©”ì„œë“œ end</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-empdaojava-1">* EmpDAO.java</h3>
<ul>
  <li>deptList() ë©”ì„œë“œì—ì„œ DB dept í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ DeptDTOì— ì €ì¥í•œë‹¤.</li>
  <li>ì €ì¥ëœ ì£¼ì†Œê°’ì„ listë¡œ  InsertServlet ë¡œ ë°˜í™˜í•œë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// dept í…Œì´ë¸”ì˜ ì „ì²´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œ</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="o">&gt;</span> <span class="nf">deptList</span><span class="o">()</span> <span class="o">{</span>
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="o">&gt;</span> <span class="n">deptList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="o">&gt;();</span>
			
	<span class="k">try</span> <span class="o">{</span>
		<span class="c1">// dept í…Œì´ë¸”ì„ deptnoì„ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” sqlë¬¸ ì‘ì„±</span>
		<span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from dept order by deptno"</span><span class="o">;</span>
		<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>		
		<span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
			
		<span class="c1">// ë‹¤ìŒ ì»¤ì„œì— ë°ì´í„°ê°€ ìˆëŠ” ë™ì•ˆ ë°˜ë³µ whileë¬¸</span>
		<span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
		
			<span class="c1">// DeptDTO ê°ì²´ì˜ ì°¸ì¡°ë³€ìˆ˜ dto ìƒì„± </span>
			<span class="nc">DeptDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DeptDTO</span><span class="o">();</span>
				
			<span class="c1">// ì°¸ì¡°ë³€ìˆ˜ dtoì˜ ì£¼ì†Œê°’ì— DB dept í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ê°ê° ì €ì¥</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setDeptno</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"deptno"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setDname</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"dname"</span><span class="o">));</span>
			<span class="n">dto</span><span class="o">.</span><span class="na">setLoc</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"loc"</span><span class="o">));</span>
				
			<span class="c1">// deptListì— dto ë³€ìˆ˜ ì¶”ê°€í•˜ì—¬ ì£¼ì†Œê°’ì„ ë„˜ê²¨ì¤€ë‹¤.</span>
			<span class="n">deptList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>				
		<span class="o">}</span>
			
	<span class="c1">// open ê°ì²´ ë‹«ê¸°</span>
	<span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">con</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
		
	<span class="c1">// deptListì˜ ì£¼ì†Œê°’ì„ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê³³(InsertServlet)ìœ¼ë¡œ ë¦¬í„´í•œë‹¤.</span>
	<span class="k">return</span> <span class="n">deptList</span><span class="o">;</span>
<span class="o">}</span> <span class="c1">// deptList() ë©”ì„œë“œ end</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-insertformjsp">* insertForm.jsp</h3>
<ul>
  <li>InsertServlet ì—ì„œ â€œdeptâ€ë¥¼ í‚¤ë¡œ í•˜ì—¬ listì˜ ì£¼ì†Œê°’ì„ ë„˜ê²¨ ë°›ì•„ deptì— ì €ì¥í•œë‹¤.</li>
  <li>deptëŠ” select íƒœê·¸ì—ì„œ ì„ íƒëª©ë¡ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.</li>
  <li>ì›¹ í˜ì´ì§€ì—ì„œ deptë¥¼ í¬í•¨í•˜ì—¬ ë°ì´í„°ë¥¼ ì…ë ¥ í›„ [ì‚¬ì›ë“±ë¡]ì„ í•˜ë©´ insertOK ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™í•œë‹¤.</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;%</span>
	<span class="c1">// InsertServlet ì—ì„œ "dept"ë¥¼ í‚¤ë¡œ í•˜ì—¬ listì˜ ì£¼ì†Œê°’ì„ ë„˜ê²¨ ë°›ëŠ”ë‹¤.</span>
	<span class="c1">// ì›ë˜ Object íƒ€ì…ìœ¼ë¡œ ë°›ìœ¼ë¯€ë¡œ í˜•ë³€í™˜</span>
	<span class="nc">List</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="err">&gt;</span> <span class="n">dept</span> <span class="o">=</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">DeptDTO</span><span class="err">&gt;</span><span class="o">)</span> <span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"dept"</span><span class="o">);</span>
<span class="nt">%&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Insert title here<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"gray"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h3&gt;</span>EMP í…Œì´ë¸” ì‚¬ì› ë“±ë¡ í¼<span class="nt">&lt;/h3&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"gray"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;br&gt;</span> <span class="nt">&lt;br&gt;</span>

		<span class="c">&lt;%-- ì›¹ í˜ì´ì§€ì—ì„œ ë°ì´í„°ë¥¼ ì…ë ¥í•œ í›„ ì‚¬ì›ë“±ë¡ì„ í•˜ë©´ insertOK ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™ --%&gt;</span>
		<span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span><span class="nt">%&gt;</span><span class="s">/insertOK"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;table</span> <span class="na">border=</span><span class="s">"1"</span> <span class="na">cellspacing=</span><span class="s">"0"</span> <span class="na">width=</span><span class="s">"300"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ì‚¬ì›ë²ˆí˜¸<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"num"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ì‚¬ì›ëª…<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ë‹´ë‹¹ì—…ë¬´<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"job"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ê´€ë¦¬ìNo.<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"mgr"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ê¸‰ ì—¬<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"sal"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ë³´ë„ˆìŠ¤<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"comm"</span><span class="nt">&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;th&gt;</span>ë¶€ì„œë²ˆí˜¸<span class="nt">&lt;/th&gt;</span>
					<span class="nt">&lt;td&gt;&lt;select</span> <span class="na">name=</span><span class="s">"deptno"</span><span class="nt">&gt;</span>
							<span class="nt">&lt;%</span>
								<span class="k">if</span> <span class="o">(</span><span class="n">dept</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°</span>
							<span class="nt">%&gt;</span>
							<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>::: ë¶€ì„œë²ˆí˜¸ ì—†ìŒ :::<span class="nt">&lt;/option&gt;</span>
							<span class="nt">&lt;%</span>
								<span class="o">}</span> <span class="k">else</span> <span class="o">{</span> <span class="c1">// ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°</span>
									<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">dept</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
										<span class="nc">DeptDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="n">dept</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
							<span class="nt">%&gt;</span>
							<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getDeptno</span><span class="o">()</span><span class="nt">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
								<span class="nt">&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getDname</span><span class="o">()</span><span class="nt">%&gt;</span>[<span class="nt">&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getDeptno</span><span class="o">()</span><span class="nt">%&gt;</span>]
							<span class="nt">&lt;/option&gt;</span>
							<span class="nt">&lt;%</span>
									<span class="o">}</span>
								<span class="o">}</span>
							<span class="nt">%&gt;</span>
					<span class="nt">&lt;/select&gt;&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>

				<span class="nt">&lt;tr&gt;</span>
					<span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"2"</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"ì‚¬ì›ë“±ë¡"</span><span class="nt">&gt;</span> 
						<span class="ni">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span> 
					<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"reset"</span> <span class="na">value=</span><span class="s">"ë‹¤ì‹œì‘ì„±"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;/td&gt;</span>
				<span class="nt">&lt;/tr&gt;</span>
			<span class="nt">&lt;/table&gt;</span>
		<span class="nt">&lt;/form&gt;</span>
	<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-insertok-ì„œë¸”ë¦¿">* insertOK ì„œë¸”ë¦¿</h3>
<ul>
  <li>insertForm ì—ì„œ ë„˜ì–´ ì˜¨ ë°ì´í„°ë¥¼ DBì— ì €ì¥.</li>
  <li>DBì— ë°ì´í„° ì¶”ê°€ ì„±ê³µ ì‹œ select ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ê°€ ì¶”ê°€ëœ í…Œì´ë¸” ì¡°íšŒ.</li>
  <li>DBì— ë°ì´í„° ì¶”ê°€ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥ í›„ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/insertOK"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InsertOKServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
       
	    <span class="kd">public</span> <span class="nf">InsertOKServlet</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
	    <span class="o">}</span>

	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="c1">// ì‚¬ì›ë“±ë¡ í¼ í˜ì´ì§€ì—ì„œ ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ëŠ” ì‘ì—…</span>
		<span class="c1">// 1. í•œê¸€ ì¸ì½”ë”© ì‘ì—…</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
		
		<span class="c1">// 2. ì‚¬ì›ë“±ë¡ í¼ì—ì„œ ë„˜ì–´ì˜¨ ë°ì´í„°ë“¤ì„ ë°›ì•„ì•¼ í•œë‹¤.</span>
		<span class="kt">int</span> <span class="n">empno</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"num"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		<span class="nc">String</span> <span class="n">ename</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"name"</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
		<span class="nc">String</span> <span class="n">job</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"job"</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
		<span class="kt">int</span> <span class="n">mgr</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"mgr"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		<span class="kt">int</span> <span class="n">sal</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"sal"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		<span class="kt">int</span> <span class="n">comm</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"comm"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		<span class="kt">int</span> <span class="n">deptno</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"deptno"</span><span class="o">));</span>
		
		<span class="nc">EmpDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDTO</span><span class="o">();</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setEmpno</span><span class="o">(</span><span class="n">empno</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setEname</span><span class="o">(</span><span class="n">ename</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setJob</span><span class="o">(</span><span class="n">job</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setMgr</span><span class="o">(</span><span class="n">mgr</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setSal</span><span class="o">(</span><span class="n">sal</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setComm</span><span class="o">(</span><span class="n">comm</span><span class="o">);</span>
		<span class="n">dto</span><span class="o">.</span><span class="na">setDeptno</span><span class="o">(</span><span class="n">deptno</span><span class="o">);</span>
		
		<span class="nc">EmpDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDAO</span><span class="o">();</span>
		
		<span class="c1">// EmpDAOì˜ insertEmp() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ res ë³€ìˆ˜ì— ì €ì¥</span>
		<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">insertEmp</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>
		
		<span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html; charset=UTF-8"</span><span class="o">);</span>
		
		<span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
		
		<span class="k">if</span><span class="o">(</span><span class="n">res</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// ì‚¬ì› ì¶”ê°€ê°€ ì„±ê³µí•œ ê²½ìš°</span>
			<span class="c1">// select ì„œë¸”ë¦¿ í˜¸ì¶œ</span>
			<span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"select"</span><span class="o">);</span>
		<span class="o">}</span><span class="k">else</span> <span class="o">{</span>	<span class="c1">// ì‚¬ì› ì¶”ê°€ê°€ ì‹¤íŒ¨í•œ ê²½ìš°</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;script&gt;"</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"alert('ì‚¬ì› ì¶”ê°€ ì‹¤íŒ¨!')"</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"history.back()"</span><span class="o">);</span>	<span class="c1">// ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•˜ë¼ëŠ” ëª…ë ¹ì–´.</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/script&gt;"</span><span class="o">);</span>
		<span class="o">}</span> <span class="c1">// ifë¬¸ end	</span>
	<span class="o">}</span> <span class="c1">// serviceë¬¸ end</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-empdaoì˜-insertemp-ë©”ì„œë“œ">* EmpDAOì˜ insertEmp() ë©”ì„œë“œ</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// EMP í…Œì´ë¸”ì— ì‚¬ì›ì„ ë“±ë¡(ì¶”ê°€)í•˜ëŠ” ë©”ì„œë“œ</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">insertEmp</span><span class="o">(</span><span class="nc">EmpDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
	<span class="c1">// ë©”ì„œë“œ ê²°ê³¼ë¥¼ ì €ì¥í•  ë³€ìˆ˜ ì„ ì–¸</span>
	<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>				
		
	<span class="k">try</span> <span class="o">{</span>
		<span class="c1">// emp í…Œì´ë¸”ì˜ ì†ì„± ìˆœì„œëŒ€ë¡œ ë ˆì½”ë“œë¥¼ ì‚½ì…í•˜ëŠ” sqlë¬¸ ì‘ì„±</span>
		<span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into emp values(?, ?, ?, ?, sysdate, ?, ?, ?)"</span><span class="o">;</span>
		
		<span class="c1">// sqlë¬¸ì„ DBì— ì—°ê²°</span>
		<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
		
		<span class="c1">// sqlë¬¸ì˜ ? ìˆœì„œëŒ€ë¡œ ì›¹ í˜ì´ì§€ì— ì…ë ¥ëœ ë°ì´í„° ì €ì¥</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEmpno</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getEname</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getJob</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getMgr</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getSal</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getComm</span><span class="o">());</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getDeptno</span><span class="o">());</span>
			
		<span class="n">result</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
			
		<span class="c1">// open ê°ì²´ ë‹«ê¸°</span>
		<span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">con</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
			
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span> <span class="c1">// insertEmp() ë©”ì„œë“œ end</span>
</code></pre></div></div>

<p align="center"><img src="../assets/img/images/210506/02.png" /></p>
<p align="center"><img src="../assets/img/images/210506/03.png" /></p>

<p><br /></p>

<hr />
<h2 id="3-dbì˜-empí…Œì´ë¸”ì—ì„œ-ë ˆì½”ë“œ-ì‚­ì œí•˜ê¸°">3. DBì˜ empí…Œì´ë¸”ì—ì„œ ë ˆì½”ë“œ ì‚­ì œí•˜ê¸°</h2>
<ol>
  <li>EmpDTO í´ë˜ìŠ¤ : DB emp í…Œì´ë¸”ê³¼ ë™ì¼í•œ ë³€ìˆ˜ ìƒì„±.</li>
  <li>deptDTO í´ë˜ìŠ¤ : DB dept í…Œì´ë¸”ê³¼ ë™ì¼í•œ ë³€ìˆ˜ ìƒì„±.</li>
  <li>EmpDAO í´ë˜ìŠ¤ : DB ì ‘ì†(ì—°ë™) ê°ì²´ í´ë˜ìŠ¤. selectList() insertEmp() deleteEmp() ë©”ì„œë“œ í¬í•¨.</li>
  <li>index.jsp : ê¸°ë³¸ì ì¸ í™”ë©´ì„ êµ¬ì„±.
    <ul>
      <li>[ì „ì²´ ë ˆì½”ë“œ] í´ë¦­ì‹œ select ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>select ì„œë¸”ë¦¿
    <ul>
      <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
      <li>empDAOì˜ selectList() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ EmpDTO í´ë˜ìŠ¤ì— ì €ì¥(list).</li>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ê°’ê³¼ í•¨ê»˜ select.jsp ë¡œ í˜ì´ì§€ ì´ë™.</li>
    </ul>
  </li>
  <li>select.jsp
    <ul>
      <li>ì €ì¥ëœ ë°ì´í„°(list)ë¥¼ í‚¤ ê°’ì„ í†µí•´ ë„˜ê²¨ ë°›ì•„ ì›¹ í˜ì´ì§€ì— ì¶œë ¥.</li>
      <li>[ì‚­ ì œ] í´ë¦­ ì‹œ delete ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
    </ul>
  </li>
  <li>delete ì„œë¸”ë¦¿
    <ul>
      <li>select.jsp ì—ì„œ ì‚­ì œí•˜ê¸°ë¡œ ì„ íƒëœ ì‚¬ë²ˆ(empno)ì˜ ë°ì´í„°ë¥¼ ë„˜ê²¨ ë°›ëŠ”ë‹¤.</li>
      <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
      <li>empDAOì˜ deleteEmp() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì— ì„ íƒëœ ì‚¬ë²ˆ(empno)ì˜ ì „ì²´ ë ˆì½”ë“œ ì‚­ì œ.</li>
      <li>DBì˜ ë ˆì½”ë“œ ì‚­ì œ ì„±ê³µ ì‹œ elect ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ê°€ ì‚­ì œëœ í…Œì´ë¸” ì¡°íšŒ.</li>
      <li>DBì˜ ë ˆì½”ë“œ ì‚­ì œ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥ í›„ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™.</li>
    </ul>
  </li>
</ol>

<p><br /></p>

<h3 id="-selectjsp-2">* select.jsp</h3>
<ul>
  <li>[ì‚­ ì œ] í´ë¦­ ì‹œ delete ì„œë¸”ë¦¿ìœ¼ë¡œ ì´ë™.</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;body&gt;</span>

	<span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h3&gt;</span>EMP í…Œì´ë¸” ì „ì²´ ë ˆì½”ë“œ ë¦¬ìŠ¤íŠ¸<span class="nt">&lt;/h3&gt;</span>
		<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;br&gt;</span> <span class="nt">&lt;br&gt;</span>

		<span class="nt">&lt;table</span> <span class="na">border=</span><span class="s">"1"</span> <span class="na">cellspacing=</span><span class="s">"0"</span> <span class="na">width=</span><span class="s">"650"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;tr&gt;</span>
				<span class="nt">&lt;th&gt;</span>ì‚¬  ë²ˆ<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ì´  ë¦„<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span> ë‹´ë‹¹ì—…ë¬´<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ê´€ë¦¬ìNo.<span class="nt">&lt;/th&gt;</span> 
				<span class="nt">&lt;th&gt;</span>ê¸‰  ì—¬<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ë³´ë„ˆìŠ¤<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ë¶€ì„œë²ˆí˜¸<span class="nt">&lt;/th&gt;</span> <span class="nt">&lt;th&gt;</span>ì…ì‚¬ì¼ì<span class="nt">&lt;/th&gt;</span>
				<span class="nt">&lt;th&gt;</span>ì‚­ ì œ<span class="nt">&lt;/th&gt;</span>
			<span class="nt">&lt;/tr&gt;</span>
			<span class="nt">&lt;%</span>
				<span class="k">if</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>	<span class="c1">// ë°ì´í„°ê°€ ìˆë‹¤ë©´</span>
					<span class="c1">// ë°ì´í„° ìˆ˜ë§Œí¼ ë°˜ë³µí•´ì„œ ì¶œë ¥</span>
					<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">emp</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
						<span class="nc">EmpDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="n">emp</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
						<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="err">"</span><span class="n">dto</span> <span class="err">&gt;&gt;&gt;</span> <span class="err">"</span> <span class="o">+</span> <span class="n">dto</span><span class="o">);</span>
					<span class="nt">%&gt;</span>
					
					<span class="nt">&lt;tr&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getEmpno</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getEname</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getJob</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getMgr</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getSal</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getComm</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getDeptno</span><span class="o">()</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getHiredate</span><span class="o">().</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span> <span class="nt">%&gt;&lt;/td&gt;</span>
						<span class="nt">&lt;td&gt;</span>
							<span class="c">&lt;%-- ? : get ë°©ì‹ --%&gt;</span>
							<span class="c">&lt;%-- /delete?no=&lt;%=dto.getEmpno()%&gt; : í•´ë‹¹ ë ˆì½”ë“œì˜ ì‚¬ë²ˆ(empno)ì˜ delete ì„œë¸”ë¦¿ ì‹¤í–‰ --%&gt;</span>
							<span class="c">&lt;%-- ì‚¬ë²ˆ(empno)ì˜ ê°’ì„ get ë°©ì‹ìœ¼ë¡œ delete ì„œë¸”ë¦¿ìœ¼ë¡œ ë„˜ê²¨ì¤€ë‹¤. --%&gt;</span>
							<span class="c">&lt;%-- ì´ ë•Œ noê°€ ë³€ìˆ˜ê°€ ë˜ë¯€ë¡œ, delete ì„œë¸”ë¦¿ì—ì„œ no ë³€ìˆ˜ë¥¼ ë°›ìœ¼ë©´ ëœë‹¤. --%&gt;</span>
							<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span> <span class="nt">%&gt;</span><span class="s">/delete?no=</span><span class="nt">&lt;%=</span><span class="n">dto</span><span class="o">.</span><span class="na">getEmpno</span><span class="o">()</span><span class="nt">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>[ì‚­ ì œ]<span class="nt">&lt;/a&gt;</span>
						<span class="nt">&lt;/td&gt;</span>
					<span class="nt">&lt;/tr&gt;</span>
	
					<span class="nt">&lt;%</span> <span class="o">}</span> <span class="c1">// forë¬¸ end</span>
				<span class="o">}</span><span class="k">else</span> <span class="o">{</span>
					<span class="c1">// ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°</span>
					<span class="nt">%&gt;</span>
					<span class="nt">&lt;tr&gt;</span>
						<span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">"9"</span> <span class="na">align=</span><span class="s">"center"</span><span class="nt">&gt;</span>
							<span class="nt">&lt;h3&gt;</span>ê²€ìƒ‰ëœ ë ˆì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.<span class="nt">&lt;/h3&gt;</span>
						<span class="nt">&lt;/td&gt;</span>
					<span class="nt">&lt;/tr&gt;</span>
				<span class="nt">&lt;%</span><span class="o">}</span><span class="nt">%&gt;</span>
			<span class="nt">&lt;/table&gt;</span>
			<span class="nt">&lt;br&gt;</span>
			<span class="nt">&lt;hr</span> <span class="na">width=</span><span class="s">"50%"</span> <span class="na">color=</span><span class="s">"red"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;br&gt;</span>
			<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;%=</span><span class="n">request</span><span class="o">.</span><span class="na">getContextPath</span><span class="o">()</span> <span class="nt">%&gt;</span><span class="s">/insert"</span><span class="nt">&gt;</span>[ì‚¬ì› ì¶”ê°€]<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-delete-ì„œë¸”ë¦¿">* delete ì„œë¸”ë¦¿</h3>
<ul>
  <li>select.jsp ì—ì„œ ì‚­ì œí•˜ê¸°ë¡œ ì„ íƒëœ ì‚¬ë²ˆ(empno)ì˜ ë°ì´í„°ë¥¼ ë„˜ê²¨ ë°›ëŠ”ë‹¤.</li>
  <li>empDAOì˜ ìƒì„±ì í˜¸ì¶œ â†’ DB ì—°ê²°.</li>
  <li>empDAOì˜ deleteEmp() ë©”ì„œë“œ í˜¸ì¶œ â†’ DB emp í…Œì´ë¸”ì— ì„ íƒëœ ì‚¬ë²ˆ(empno)ì˜ ì „ì²´ ë ˆì½”ë“œ ì‚­ì œ.</li>
  <li>DBì˜ ë ˆì½”ë“œ ì‚­ì œ ì„±ê³µ ì‹œ elect ì„œë¸”ë¦¿ì„ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ê°€ ì‚­ì œëœ í…Œì´ë¸” ì¡°íšŒ.</li>
  <li>DBì˜ ë ˆì½”ë“œ ì‚­ì œ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥ í›„ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/delete"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DeleteServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
       
    <span class="kd">public</span> <span class="nf">DeleteServlet</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>
    <span class="o">}</span>

	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
		<span class="c1">// [ì‚­ ì œ]ë¼ëŠ” ê¸€ì í´ë¦­ ì‹œ ì‚¬ì›ë²ˆí˜¸ë¥¼ ê°€ì ¸ì™€ DBì—ì„œ </span>
		<span class="c1">// ì‚¬ì›ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ì‚¬ì›ì •ë³´ë¥¼ ì‚­ì œí•˜ëŠ” ì‘ì—….</span>
		
		<span class="c1">// select.jspì—ì„œ getë°©ì‹ìœ¼ë¡œ ë„˜ê²¨ë°›ì€ noë³€ìˆ˜ë¥¼ empno ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.</span>
		<span class="kt">int</span> <span class="n">empno</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"no"</span><span class="o">));</span>
		
		<span class="nc">EmpDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EmpDAO</span><span class="o">();</span>
		<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">deleteEmp</span><span class="o">(</span><span class="n">empno</span><span class="o">);</span>
		
		<span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html; charset=UTF-8"</span><span class="o">);</span>
		<span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
		
		<span class="k">if</span><span class="o">(</span><span class="n">res</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// ì‚¬ì› ì‚­ì œê°€ ì„±ê³µí•œ ê²½ìš°</span>
			<span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"select"</span><span class="o">);</span>
		<span class="o">}</span><span class="k">else</span> <span class="o">{</span> <span class="c1">// ì‚¬ì› ì‚­ì œê°€ ì‹¤íŒ¨í•œ ê²½ìš°</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;script&gt;"</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"alert('ì‚¬ì› ì‚­ì œ ì‹¤íŒ¨!')"</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"history.back()"</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/script&gt;"</span><span class="o">);</span>
		<span class="o">}</span> <span class="c1">// ifë¬¸ end</span>
	<span class="o">}</span> <span class="c1">// serviceë¬¸ end</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="-empdaoì˜-deleteemp-ë©”ì„œë“œ">* EmpDAOì˜ deleteEmp() ë©”ì„œë“œ</h3>
<ul>
  <li>EMP í…Œì´ë¸”ì—ì„œ ì‚¬ì›ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ì‚¬ì›ì„ ì‚­ì œí•˜ëŠ” ë©”ì„œë“œ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">deleteEmp</span><span class="o">(</span><span class="kt">int</span> <span class="n">empno</span><span class="o">)</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>	
		
		<span class="k">try</span> <span class="o">{</span>
			<span class="n">sql</span> <span class="o">=</span> <span class="s">"delete from emp where empno = ?"</span><span class="o">;</span>
			<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
			
			<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">empno</span><span class="o">);</span>
			
			<span class="n">result</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
			
			<span class="c1">// open ê°ì²´ ë‹«ê¸°</span>
			<span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="n">con</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// TODO Auto-generated catch block</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		
	<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span> <span class="c1">// deleteEmp() ë©”ì„œë“œ end</span>
</code></pre></div></div>

<p><br /></p>

<p align="center"><img src="../assets/img/images/210506/04.png" /></p>

<p><br /></p>

<p align="center"><img src="../assets/img/images/210506/05.png" /></p>
:ET