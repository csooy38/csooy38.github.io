I"¶§<h1 id="mappingproperties-íŒŒì¼-ì´ìš©">mapping.properties íŒŒì¼ ì´ìš©</h1>

<p>14_Board_Reply êµ¬í˜„ ë‚´ìš©ì´ë‹¤.<br />
forwardë¡œ ë°ì´í„°ë¥¼ ë„˜ê¸°ëŠ” ê²Œ ì–´ë ¤ì›Œì„œ ì•„ì§ ê³µë¶€ ì¤‘ì´ë‹¤.<br />
(+ìˆ˜ì •ì™„ë£Œ 210521 | 5-1 ì°¸ê³ )</p>

<p><br /></p>

<hr />
<h2 id="1-action-ì¸í„°í˜ì´ìŠ¤">1. Action ì¸í„°í˜ì´ìŠ¤</h2>
<p>ì´ì „ê¹Œì§€ëŠ” ë°˜í™˜íƒ€ì…ì„ String, voidë¡œ ë‘ì—ˆë‹¤ë©´<br />
ì´ë²ˆì—ëŠ” ActionForward ê°ì²´ íƒ€ì…ìœ¼ë¡œ ë‘ì–´ ActionForwardì˜ ë©¤ë²„ë³€ìˆ˜ë¡œ ë°˜í™˜í•  ê²ƒì´ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Action</span> <span class="o">{</span>

	<span class="c1">// ë°˜í™˜íƒ€ì…ì´ ActionFowardì¸ ì¶”ìƒ ë©”ì„œë“œ</span>
	<span class="kd">public</span> <span class="nc">ActionForward</span> <span class="nf">execute</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="2-actionforward-í´ë˜ìŠ¤">2. ActionForward í´ë˜ìŠ¤</h2>
<p>Action ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ë“¤ì˜ executeë©”ì„œë“œ ë°˜í™˜íƒ€ì…ì´ ë  í´ë˜ìŠ¤ë‹¤.<br />
ActionForward í´ë˜ìŠ¤ì—ëŠ” ë‘ ê°€ì§€ ë©¤ë²„ë³€ìˆ˜ê°€ ìˆë‹¤.</p>

<p>1) insRedirect() ë©¤ë²„ : boolean íƒ€ì…
	- *.do í˜ì´ì§€(true) : *.do í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤ë©´ true ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤. <br />
	- jsp í˜ì´ì§€(false) : .jsp í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤ë©´ false ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤.  <br />
2) path ë©¤ë²„ : String íƒ€ì…
	- íŒŒì¼ ê²½ë¡œ ì§€ì •. RequestDispatcher()ì˜ ì¸ìê°€ ë˜ì–´ pathì˜ ì§€ì •ê²½ë¡œë¡œ ì´ë™í•œë‹¤.</p>

<p>ëª¨ë‘ privateë¡œ ë‘ê³  getter()/setter()ë¡œ ì ‘ê·¼í•˜ê²Œ í•œë‹¤.<br />
FrontController, *Action í´ë˜ìŠ¤ ë“± ì—¬ëŸ¬ ê³³ì—ì„œ â€˜í˜ì´ì§€ ì´ë™â€™ì„ ì •ë¦¬í•´ ì¤„ ì¤‘ì‹¬ ë³€ìˆ˜ì´ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ActionForward</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kt">boolean</span> <span class="n">isRedirect</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">path</span><span class="o">;</span>
	
	<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isRedirect</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">isRedirect</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setRedirect</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">isRedirect</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">isRedirect</span> <span class="o">=</span> <span class="n">isRedirect</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPath</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">path</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPath</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="3-mappingproperties-íŒŒì¼">3. mapping.properties íŒŒì¼</h2>
<p>ì£¼ì„ìœ¼ë¡œëŠ” <code class="language-plaintext highlighter-rouge">#</code>ì„ ì‚¬ìš©í•œë‹¤.<br />
ì‘ì„±ë°©ì‹ì€ key = value í˜•íƒœë¡œ, getProperty()ë¡œ key ë˜ëŠ” valueë¥¼ í˜¸ì¶œí•œë‹¤. 
value ê°’ ì•ì— íŠ¹ì • ë¬¸êµ¬(execute)ì„ ë‘ì–´ ì„œë¸”ë¦¿ ì‹¤í–‰ê³¼ jsp íŒŒì¼ ì´ë™ì„ êµ¬ë¶„í•œë‹¤. <br />
value ê°’ ì•ì— â€œexecuteâ€ë¼ê³  ì í˜€ìˆëŠ” key ê°’ì„ ë°›ìœ¼ë©´ ëª¨ë‘ ì„œë¸”ë¦¿ ì‹¤í–‰ìœ¼ë¡œ ì—°ê²°ëœë‹¤.<br />
ìì„¸í•œ ë°©ì‹ì€ FrontControllerì—ì„œ ë‹¤ë£¬ë‹¤.</p>

<pre><code class="language-file"># ì£¼ì„ì²˜ë¦¬ëŠ” ìƒµ(#)ì„ ì‚¬ìš©í•œë‹¤. 
# key = value í˜•íƒœë¡œ, 
# getProperty()ë¡œ key ë˜ëŠ” valueë¥¼ í˜¸ì¶œí•œë‹¤. 

# ê²Œì‹œíŒ Action Class
bbs_list.do = execute|com.reply.action.BbsListAction
bbs_write_ok.do = execute|com.reply.action.BbsWriteOkAction
bbs_cont.do = execute|com.reply.action.BbsContAction
bbs_update.do = execute|com.reply.action.BbsUpdateAction
bbs_update_ok.do = execute|com.reply.action.BbsUpdateOkAction
bbs_delete.do = execute|com.reply.action.BbsDeleteAction
bbs_delete_ok.do = execute|com.reply.action.BbsDeleteOkAction

# ê²Œì‹œíŒ view page
bbs_write.do = view/bbs_write.jsp
</code></pre>

<p><br /></p>

<hr />
<h2 id="4-frontcontroller">4. FrontController</h2>
<p>1) ë³€ìˆ˜ actionê³¼ forwardë¥¼ ì„ ì–¸í•œë‹¤. <br />
ìš°ì„  ì•„ë˜ì—ì„œ ì‘ì„±í•  ì¡°ê±´ë¬¸ ì•ˆì—ì„œ ì‚¬ìš©ë  ë³€ìˆ˜ actionê³¼ forwardë¥¼ ì„ ì–¸í•œë‹¤.<br />
ì¡°ê±´ë¬¸ ì•ˆì—ì„œ ì„ ì–¸í•  ê²½ìš° ì§€ì—­ë³€ìˆ˜ê°€ ë˜ì–´ ì¡°ê±´ë¬¸ ë°–ì—ì„  ì‚¬ìš©í•˜ì§€ ëª»í•˜ë¯€ë¡œ ë¯¸ë¦¬ ì„ ì–¸í•´ë‘”ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Action</span> <span class="n">action</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">ActionForward</span> <span class="n">forward</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div></div>

<p><br /></p>

<p>2) Properties í´ë˜ìŠ¤ì˜ ë³€ìˆ˜ propì„ ì •ì˜í•œë‹¤. <br />
ìœ„ì—ì„œ ì‘ì„±í•œ mapping.properties íŒŒì¼ì˜ ë‚´ìš©ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Properties í´ë˜ìŠ¤ ë³€ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Properties</span> <span class="n">prop</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>

<span class="c1">// properties íŒŒì¼ ê²½ë¡œë¡œ InputStream ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ </span>
<span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"mapping.properties íŒŒì¼ì´ ì €ì¥ëœ ê²½ë¡œ"</span><span class="o">);</span>

<span class="c1">// load() ë©”ì„œë“œë¡œ íŒŒì¼ì„ ì½ì–´ì˜¬ ìˆ˜ ìˆê²Œ ëœë‹¤. </span>
<span class="n">prop</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">fis</span><span class="o">);</span>
		
<span class="c1">// getProperty() : í‚¤ë¥¼ í˜¸ì¶œí•˜ë©´ valueë¥¼, valueë¥¼ í˜¸ì¶œí•˜ë©´ í‚¤ ê°’ì„ ë°˜í™˜í•œë‹¤.</span>
<span class="c1">// í˜¸ì¶œí•œ ê°’ì„ valueë¡œ ì €ì¥í•œë‹¤. </span>
<span class="c1">// ì—¬ê¸°ì„œ command ë³€ìˆ˜ëŠ” mapping.propertiesì˜ keyê°€ ë˜ë¯€ë¡œ valueì—ëŠ” valueê°’ì´ ì €ì¥ëœë‹¤.  </span>
<span class="nc">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">command</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<ul>
  <li>java.util.Properties í´ë˜ìŠ¤
    <ul>
      <li>Properties í´ë˜ìŠ¤ëŠ” HashTableì˜ í•˜ìœ„ í´ë˜ìŠ¤.</li>
      <li>ë³´í†µì€ í™˜ê²½ ë³€ìˆ˜ ë° ì†ì„± ê°’ì„ Properties íŒŒì¼ì— ì €ì¥í•˜ì—¬ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.</li>
      <li>Properties íŒŒì¼ì€ ì¼ë ¨ì˜ í‚¤(key)-ê°’(value)ì˜ í•œ ìŒìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.</li>
      <li>ë³´í†µì€ íŒŒì¼ì— ì €ì¥í•˜ì—¬ ì‚¬ìš©í•œë‹¤. íŒŒì¼ ì´ë¦„ì„ *.properties ìœ¼ë¡œ ëë‚˜ê²Œ í•œë‹¤.</li>
      <li>InputStream ì— Properties íŒŒì¼ì„ ì¸ìë¡œ ë„£ì–´ì„œ ê·¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œë¶€í„° íŒŒì¼ì„ ê°€ì ¸ì˜¬ ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œë‹¤. ì¸ìë¡œ ë“¤ì–´ì˜¨ Properties íŒŒì¼ì„ ì½ê²Œ ëœë‹¤.</li>
      <li>load() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ íŒŒì¼ì„ ì½ì–´ë“¤ì´ê²Œ ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>3) ë™ì  ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.<br />
newInstance() ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ valueì— ì €ì¥ëœ íŒŒì¼ì˜ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.<br />
valueì— ì €ì¥ëœ ë°ì´í„°ë¥¼ â€œ|â€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í›„ìì˜ ë°ì´í„°ë¥¼ String ë³€ìˆ˜ë¡œ ì €ì¥í•œë‹¤.(url_2)<br />
url_2 ì—ëŠ” ì‹¤í–‰ë  ì•¡ì…˜íŒŒì¼ ê²½ë¡œê°€ ì €ì¥ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, forName()ë³€ìˆ˜ë¡œ í•´ë‹¹ ì•¡ì…˜íŒŒì¼ì˜ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">7</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="s">"execute"</span><span class="o">))</span> <span class="o">{</span>	<span class="c1">// valueì˜ 0ë²ˆì§¸ì—ì„œ 6ë²ˆì§¸ ì¸ë±ìŠ¤ê¹Œì§€ ì €ì¥ëœ ê°’ì´ "execute"ë¼ë©´  </span>
			
	<span class="c1">// StringTokenizer ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ valueì— ì €ì¥ëœ ê°’ì„ "|"ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆˆë‹¤. </span>
	<span class="nc">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringTokenizer</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="s">"|"</span><span class="o">);</span>
	
	<span class="c1">// valueì—ëŠ” "execute|íŒ¨í‚¤ì§€ëª….í´ë˜ìŠ¤ëª…" í˜•íƒœë¡œ ì €ì¥ë˜ì–´ ìˆìœ¼ë¯€ë¡œ,</span>
	<span class="nc">String</span> <span class="n">url_1</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>	<span class="c1">// "execute"</span>
	<span class="nc">String</span> <span class="n">url_2</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">nextToken</span><span class="o">();</span>	<span class="c1">// "íŒ¨í‚¤ì§€ëª….í´ë˜ìŠ¤ëª…"</span>

	<span class="k">try</span> <span class="o">{</span>
		<span class="c1">// url_2(íŒ¨í‚¤ì§€ëª….í´ë˜ìŠ¤ëª…)ë¥¼ ë¡œë”©í•œë‹¤.</span>
		<span class="nc">Class</span> <span class="n">url</span> <span class="o">=</span> <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">url_2</span><span class="o">);</span> 	
				
		<span class="c1">// ë™ì ìœ¼ë¡œ ê°ì²´ ìƒì„±</span>
		<span class="c1">// action = new BbsListAction(); ê³¼ ë™ì¼í•œ ê°œë…</span>
		<span class="n">action</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Action</span><span class="o">)</span><span class="n">url</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
				
		<span class="c1">// ActionForward í´ë˜ìŠ¤ì˜ ë©¤ë²„ë³€ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‹¤í–‰ ë©”ì„œë“œë¥¼ forwardì— ì €ì¥í•œë‹¤.  </span>
		<span class="n">forward</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
				
	<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">// TODO Auto-generated catch block</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>	
<span class="o">}</span><span class="k">else</span> <span class="o">{</span>	<span class="c1">// value ê°’ì´ "execute" ë¬¸ìì—´ì´ ì•„ë‹Œ ê²½ìš° view pageë¡œ ì´ë™</span>
	<span class="n">forward</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionForward</span><span class="o">();</span>
	
	<span class="n">forward</span><span class="o">.</span><span class="na">setRedirect</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>	<span class="c1">// view pageë¡œ ì´ë™ì‹œì—ëŠ” redirect ê°’ì´ false</span>
	<span class="n">forward</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>ë™ì  ê°ì²´ ìƒì„± : newInstance()
    <ul>
      <li>Class ê°ì²´ë¥¼ ì´ìš©í•˜ë©´ new ì—°ì‚°ìì˜ ì‚¬ìš© ì—†ì´ ë™ì ìœ¼ë¡œ ê°ì²´ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
      <li>ì½”ë“œ ì‘ì„± ì‹œì— í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ê²°ì •í•  ìˆ˜ ì—†ê³ , ëŸ°íƒ€ì„(ì‹¤í–‰) ì‹œì— í´ë˜ìŠ¤ì˜ ì´ë¦„ì´ ê²°ì •ë˜ëŠ” ê²½ìš°ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤.</li>
      <li>newInstance() ë©”ì„œë“œëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ í´ë˜ìŠ¤ì— ê¸°ë³¸ ìƒì„±ìê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤. ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°, í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì¶”ìƒí´ë˜ìŠ¤ì´ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤ì¼ ê²½ìš° ë°œìƒí•˜ë©° ë˜í•œ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ì ‘ê·¼ ì œí•œìë¡œ ì¸í•´ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë„ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.</li>
      <li>ë°˜í™˜íƒ€ì…ì€ Objects íƒ€ì…ì´ë¯€ë¡œ ë§ê²Œ í˜•ë³€í™˜ì„ í•˜ë©´ ë˜ì§€ë§Œ, í´ë˜ìŠ¤ì˜ íƒ€ì…ì„ ëª¨ë¥´ëŠ” ìƒíƒœì´ë¯€ë¡œ í˜•ë³€í™˜ì„ í•  ìˆ˜ê°€ ì—†ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.</li>
      <li>Class.forName(class ì´ë¦„)ì€ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ class ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•œ í›„ì— ê·¸ í´ë˜ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¦¬í„´í•œë‹¤. newInstance() ë©”ì„œë“œëŠ” ë¡œë”©í•œ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œì´ê³  ì´ë ‡ê²Œ ìƒì„±ëœ ê°ì²´ë¥¼ ë™ì  ê°ì²´ ìƒì„±ì´ë¼ê³  í•œë‹¤.</li>
    </ul>
  </li>
</ul>

<p>4) forwardì˜ ê°’ì— ë”°ë¼ ì„œë¸”ë¦¿ì„ ì‹¤í–‰í•˜ê±°ë‚˜ view pageë¡œ ì´ë™í•œë‹¤.<br />
forwardì˜ redirect ê°’ì´</p>
<ul>
  <li>true : ì„œë¸”ë¦¿ ì‹¤í–‰</li>
  <li>false : view pageë¡œ ì´ë™</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="o">(</span><span class="n">forward</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>	
	<span class="k">if</span><span class="o">(</span><span class="n">forward</span><span class="o">.</span><span class="na">isRedirect</span><span class="o">())</span> <span class="o">{</span>	<span class="c1">// true ì¸ ê²½ìš° ë‹¤ì‹œ *.do ì‹¤í–‰</span>
		<span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="n">forward</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
	<span class="o">}</span><span class="k">else</span> <span class="o">{</span>	<span class="c1">// false ì¸ ê²½ìš° view pageë¡œ ì´ë™</span>
		<span class="nc">RequestDispatcher</span> <span class="n">rd</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="n">forward</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
		<span class="n">rd</span><span class="o">.</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br /></p>

<hr />
<h2 id="5-ì•¡ì…˜-í´ë˜ìŠ¤-ìƒì„±">5. ì•¡ì…˜ í´ë˜ìŠ¤ ìƒì„±</h2>
<p>ì´ì œ ë§¤í•‘ëœ value ê°’ë§ˆë‹¤ ì•¡ì…˜ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ì½”ë“œ ì‘ì„± í›„ foward ê°’ì„ ì„¤ì •í•˜ì—¬ ë¦¬í„´í•˜ë©´ ëœë‹¤.<br />
í´ë˜ìŠ¤ ì•ˆì—ëŠ” ê¸°ì¡´ì˜ ì•¡ì…˜ í´ë˜ìŠ¤ì²˜ëŸ¼ DTO, DAO ê°ì²´ê°€ í™œìš©ë  ìˆ˜ ìˆë‹¤. <br />
ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BbsDeleteAction</span> <span class="kd">implements</span> <span class="nc">Action</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">ActionForward</span> <span class="nf">execute</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
		
		<span class="kt">int</span> <span class="n">nowPage</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"page"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		<span class="kt">int</span> <span class="n">bbs_no</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"no"</span><span class="o">).</span><span class="na">trim</span><span class="o">());</span>
		
		<span class="nc">BbsDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="nc">BbsDAO</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
		<span class="nc">BbsDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">getBbsCont</span><span class="o">(</span><span class="n">bbs_no</span><span class="o">);</span>
		
		<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"del"</span><span class="o">,</span> <span class="n">dto</span><span class="o">);</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"page"</span><span class="o">,</span> <span class="n">nowPage</span><span class="o">);</span>
		<span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"no"</span><span class="o">,</span> <span class="n">bbs_no</span><span class="o">);</span>
		
		<span class="c1">// ActionForward ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ redirect ê°’ì„ ì„¤ì •í•˜ê³  pathë¥¼ ì§€ì •í•œë‹¤.  </span>
		<span class="nc">ActionForward</span> <span class="n">forward</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionForward</span><span class="o">();</span>
		 
		<span class="n">forward</span><span class="o">.</span><span class="na">setRedirect</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>	<span class="c1">// redirectê°€ false ì´ë¯€ë¡œ view pageë¡œ ì´ë™í•  ê²ƒì´ë‹¤.  </span>
		<span class="n">forward</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="s">"view/bbs_delete.jsp"</span><span class="o">);</span>	<span class="c1">// ì´ë™í•  view page ê²½ë¡œ</span>
		
		<span class="k">return</span> <span class="n">forward</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><br /></p>

<h3 id="5-1-ë°ì´í„°-ê°’ì„-ì•¡ì…˜í´ë˜ìŠ¤ì—ì„œ-í•¨ê»˜-ë„˜ê¸°ëŠ”-ë°©ë²•">5-1. ë°ì´í„° ê°’ì„ ì•¡ì…˜í´ë˜ìŠ¤ì—ì„œ í•¨ê»˜ ë„˜ê¸°ëŠ” ë°©ë²•</h3>
<p>ê²Œì‹œë¬¼ì„ ìˆ˜ì •í•˜ëŠ”ë° ìê¾¸ í˜ì´ì§€ ì´ë™ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤.<br />
ìˆ˜ì •ì´ ì„±ê³µë˜ê±°ë‚˜ ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ë¡œ ì‹¤íŒ¨í•˜ê±°ë‚˜ ëª¨ë‘ cont í˜ì´ì§€ë¡œ ì´ë™í•˜ì§€ ëª»í•˜ê³  NullPointException ì„ ì¶œë ¥í•˜ì˜€ë‹¤.</p>

<p>noë³€ìˆ˜ì™€ pageë³€ìˆ˜ê°€ í•¨ê»˜ ë„˜ì–´ê°€ì§€ ì•Šì•„ì„œ cont í˜ì´ì§€ê°€ ì—´ë¦¬ì§€ ì•ŠëŠ”ë‹¤ê³  íŒë‹¨í•˜ì—¬ setAttributeë¥¼ ì„¤ì •í•˜ëŠ” ë“± ì—¬ëŸ¬ê°€ì§€ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í•´ ë³´ì•˜ìœ¼ë‚˜ ê²°ê³¼ë¶€í„° ë§í•˜ìë©´</p>

<p><strong>ëª¨ë‘ í•„ìš” ì—†ì—ˆë‹¤.</strong> <br />
ìˆ˜ì • ì„±ê³µì‹œì—ëŠ” forwardì˜ path ì§€ì •ì—ì„œ ê¸°ì¡´ì˜ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ê²½ë¡œì—ì„œ ë°ì´í„°ë¥¼ ë„˜ê¸°ë©´ ë˜ì—ˆë‹¤.<br />
ìˆ˜ì • ì‹¤íŒ¨ì‹œì—ëŠ” ì˜¤íƒ€ê°€ ìˆì–´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê±°ì˜€ë‹¤. ìƒëµëœ ê´„í˜¸â€)â€ë¥¼ ë„£ì–´ ìˆ˜ì •í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ í˜ì´ì§€ê°€ ëŒì•„ê°”ë‹¤. ì˜¤íƒ€ì— ì£¼ì˜í•˜ì!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">forward</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="s">"bbs_cont.do?no="</span><span class="o">+</span><span class="n">bbs_no</span><span class="o">+</span><span class="s">"&amp;page="</span><span class="o">+</span><span class="n">nowPage</span><span class="o">);</span>
</code></pre></div></div>

<p><br /></p>

<p>ì•„ë˜ëŠ” ì• ë¨¹ì—ˆë˜ ì½”ë“œ ì „ë¬¸</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="o">(</span><span class="n">bbs_pwd</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">db_pwd</span><span class="o">))</span> <span class="o">{</span>	<span class="c1">// ë¹„ë°€ë²ˆí˜¸ê°€ ê°™ì€ ê²½ìš°</span>
	
	<span class="c1">// ë³€ê²½ëœ ê²Œì‹œë¬¼ ì‘ì„±ë‚´ìš©ì„ dto ê°ì²´ì— ì €ì¥		</span>
	<span class="nc">BbsDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="nc">BbsDAO</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
	<span class="nc">BbsDTO</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BbsDTO</span><span class="o">();</span>
	
	<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_no</span><span class="o">(</span><span class="n">bbs_no</span><span class="o">);</span>
	<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_writer</span><span class="o">(</span><span class="n">bbs_writer</span><span class="o">);</span>
	<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_title</span><span class="o">(</span><span class="n">bbs_title</span><span class="o">);</span>
	<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_cont</span><span class="o">(</span><span class="n">bbs_cont</span><span class="o">);</span>
	<span class="n">dto</span><span class="o">.</span><span class="na">setBoard_pwd</span><span class="o">(</span><span class="n">bbs_pwd</span><span class="o">);</span>
			
	<span class="c1">// ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ëŠ” ë©”ì„œë“œ í˜¸ì¶œ</span>
	<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">updateBbs</span><span class="o">(</span><span class="n">dto</span><span class="o">);</span>
			
	<span class="k">if</span><span class="o">(</span><span class="n">res</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>	<span class="c1">// ê²Œì‹œê¸€ ìˆ˜ì •ì´ ì„±ê³µí•œ ê²½ìš°</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;script&gt;"</span><span class="o">);</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"alert('ìˆ˜ì •ì™„ë£Œ!')"</span><span class="o">);</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/script&gt;"</span><span class="o">);</span>
				
		<span class="n">forward</span><span class="o">.</span><span class="na">setRedirect</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
		<span class="n">forward</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="s">"bbs_cont.do?no="</span><span class="o">+</span><span class="n">bbs_no</span><span class="o">+</span><span class="s">"&amp;page="</span><span class="o">+</span><span class="n">nowPage</span><span class="o">);</span>
	<span class="o">}</span><span class="k">else</span> <span class="o">{</span>	<span class="c1">// ê²Œì‹œê¸€ ìˆ˜ì •ì´ ì‹¤íŒ¨í•œ ê²½ìš°</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;script&gt;"</span><span class="o">);</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"alert('ìˆ˜ì •ì‹¤íŒ¨!')"</span><span class="o">);</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"history.back()"</span><span class="o">);</span>
		<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/script&gt;"</span><span class="o">);</span>
	<span class="o">}</span>	
			
<span class="o">}</span><span class="k">else</span> <span class="o">{</span>	<span class="c1">// ë¹„ë°€ë²ˆí˜¸ê°€ ë‹¤ë¥¸ ê²½ìš°</span>
	<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;script&gt;"</span><span class="o">);</span>
	<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"alert('ìˆ˜ì •ì‹¤íŒ¨! ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”!')"</span><span class="o">);</span>
	<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"history.back()"</span><span class="o">);</span>
	<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/script&gt;"</span><span class="o">);</span>
<span class="o">}</span>			
</code></pre></div></div>

<p><br /></p>

<hr />
<h2 id="6-ë‹µë³€-ê¸°ëŠ¥">6. ë‹µë³€ ê¸°ëŠ¥</h2>

<p align="center"><img src="../assets/img/images/210521/01.png" /></p>

<p>ì´ë²ˆ ê²Œì‹œíŒì˜ í…Œì´ë¸”ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="n">jsp_bbs</span><span class="p">(</span>
	<span class="n">board_no</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>				<span class="c1">-- ê²Œì‹œíŒ ê¸€ë²ˆí˜¸</span>
	<span class="n">board_writer</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>		<span class="c1">-- ê²Œì‹œíŒ ê¸€ ì‘ì„±ì</span>
	<span class="n">board_title</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>		<span class="c1">-- ê²Œì‹œíŒ ê¸€ ì œëª©</span>
	<span class="n">board_cont</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>		<span class="c1">-- ê²Œì‹œíŒ ê¸€ ë‚´ìš©</span>
	<span class="n">board_pwd</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>			<span class="c1">-- ê²Œì‹œíŒ ê¸€ ë¹„ë°€ë²ˆí˜¸</span>
	<span class="n">board_hit</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">default</span> <span class="mi">0</span><span class="p">,</span>				<span class="c1">-- ê²Œì‹œíŒ ê¸€ ì¡°íšŒìˆ˜</span>
	<span class="n">board_date</span> <span class="nb">date</span><span class="p">,</span>								<span class="c1">-- ê²Œì‹œíŒ ê¸€ ì‘ì„±ì¼ì</span>
	<span class="n">board_group</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>						<span class="c1">-- ê²Œì‹œíŒ ê¸€ ê·¸ë£¹</span>
	<span class="n">board_step</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>							<span class="c1">-- ê²Œì‹œíŒ ê¸€ ë‹µë³€ ë‹¨ê³„</span>
	<span class="n">board_indent</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>						<span class="c1">--	ê²Œì‹œíŒ ë‹µë³€ê¸€ ë“¤ì—¬ì“°ê¸°</span>
<span class="p">);</span>
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ board_group, board_step, board_indent ê°€ ë‹µë³€ ê¸°ëŠ¥ì—ì„œ í™œìš©ë˜ëŠ” ì»¬ëŸ¼ë“¤ì´ë‹¤.</p>
<ul>
  <li>board_group : ê¸€ ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ë‹µê¸€ë“¤ì„ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ì£¼ëŠ” ì»¬ëŸ¼.</li>
  <li>board_step : ë‹µê¸€ì´ ë‹¬ë¦° ìˆœì„œì— ë”°ë¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸° ìœ„í•œ ì»¬ëŸ¼.</li>
  <li>board_indent : ë“¤ì—¬ì“°ê¸° íšŸìˆ˜ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•œ ì»¬ëŸ¼.</li>
</ul>

<p>ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. ì‘ì„±ìˆœì„œëŠ” test ì˜†ì˜ ìˆ˜ë¡œ ë‚˜íƒ€ë‚´ì—ˆë‹¤.</p>

<p align="center"><img src="../assets/img/images/210521/00.png" /></p>

<ol>
  <li>10ë²ˆ ê²Œì‹œê¸€ì— ë‹¬ë¦° ë‹µê¸€ì€ ëª¨ë‘ 10ë²ˆ group ìœ¼ë¡œ ë¬¶ì˜€ë‹¤. (board_group)</li>
  <li>ë‹µê¸€ì´ stepì— ë”°ë¼ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì—ˆë‹¤. (board_step)</li>
  <li>indentì˜ ìˆ˜ë§Œí¼ ë“¤ì—¬ì“°ê¸°ê°€ ì ìš©ë˜ì—ˆë‹¤. (board_indent)</li>
</ol>

<p>ìœ„ì™€ ê°™ì´ ì¶œë ¥í•˜ê¸° ìœ„í•˜ì—¬, ë‹µê¸€ì„ ì‘ì„±í•  ë•ŒëŠ” ë‘ ê°€ì§€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</p>

<p><br /></p>

<h3 id="6-1-replyupdate">6-1. replyUpdate()</h3>
<p>jsp_bbs í…Œì´ë¸” ê²Œì‹œíŒ ë‹µë³€ ê¸€ì˜ stepì„ í•˜ë‚˜ ì¦ê°€ì‹œí‚¤ëŠ” ë©”ì„œë“œ. 
në²ˆ ê¸€ì— ë‹µë³€ì„ ë‹¬ ë•Œ, në²ˆ ê¸€ì˜ ê·¸ë£¹ì´ë©´ì„œ stepì´ në²ˆ ê¸€ì˜ stepë³´ë‹¤ í° ëª¨ë“  ê²Œì‹œê¸€ì˜ stepì„ ëª¨ë‘ +1 í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sql</span> <span class="o">=</span> <span class="s">"update jsp_bbs set board_step = board_step + 1 where board_group = ? and board_step &gt; ?"</span><span class="o">;</span>

<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">bbs_group</span><span class="o">);</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">bbs_step</span><span class="o">);</span>

<span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="6-2-replybbs">6-2. replyBbs()</h3>

<p>DBì— ì‘ì„±í•œ ë‹µê¸€ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë©”ì„œë“œ.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="n">openConn</span><span class="o">();</span>
<span class="n">sql</span> <span class="o">=</span> <span class="s">"select count(*) from jsp_bbs"</span><span class="o">;</span>
<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
<span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
	<span class="n">count</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>	<span class="c1">// sequence ëŒ€ì‹  ì‚¬ìš©í•˜ëŠ” ë°©ë²•</span>
<span class="o">}</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s">"insert into jsp_bbs values(?,?,?,?,?,default,sysdate,?,?,?)"</span><span class="o">;</span>

<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_writer</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_title</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_cont</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_pwd</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_group</span><span class="o">());</span>

<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_step</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>	<span class="c1">// ë‹µë³€ì„ ë‹¬ ê²Œì‹œê¸€ë³´ë‹¤ step ì„ +1í•œë‹¤. </span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_indent</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>	<span class="c1">// ë‹µë³€ì„ ë‹¬ ê²Œì‹œê¸€ë³´ë‹¤ indent ë¥¼ +1í•œë‹¤.</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
</code></pre></div></div>

<p>ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ ê·¸ë¦¼ì—ì„œ 15ë²ˆ ê²Œì‹œê¸€ì¸ â€œre) re) test6â€ì— ë‹µê¸€ì„ ì‘ì„±í•œë‹¤ê³  ê°€ì •í•´ ë³´ì.</p>

<p align="center"><img src="../assets/img/images/210521/02.png" /></p>

<p>15ë²ˆ ê²Œì‹œê¸€ì€ 10ë²ˆ ê²Œì‹œê¸€ì˜ ë‹µê¸€ì— ë‹µê¸€ì´ ë‹¬ë¦°, ì¦‰ 10ë²ˆ ê·¸ë£¹ì— ì†í•˜ëŠ” ê¸€ì´ë‹¤. <br />
í˜„ì¬ stepì´ 2 ì´ë¯€ë¡œ, ì•„ë˜ì— ë‹¬ë¦´ ë‹µê¸€ì˜ stepì€ 3ì´ ë˜ì–´ì•¼ í•œë‹¤.<br />
ì´ ë•Œ 3ê³¼ ë™ì¼í•œ stepì´ ì¡´ì¬í•˜ë©´ ìˆœì„œê°€ ê¼¬ì¼ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ 3 ì´ìƒì˜ stepë“¤ì„ ëª¨ë‘ +1ì”© í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>

<p><br /></p>

<p align="center"><img src="../assets/img/images/210521/03.png" /></p>

<p>ì¦‰, ë‹µê¸€ì„ ë‹¬ 15ë²ˆ ê²Œì‹œê¸€ì˜ stepì¸ 2ë³´ë‹¤ í° ìˆ˜ë“¤ì„ ëª¨ë‘ +1ì”© í•´ì£¼ê³  ê·¸ ì‚¬ì´ì— stepì´ 3ì¸ ê²Œì‹œê¸€ì„ ë„£ëŠ” ì‹ì´ë‹¤.<br />
ê¸°ì¡´ê¸€ê³¼ ë‹µê¸€ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë“¤ì—¬ì“°ê¸°ë¥¼ ìœ„í•´ indent ìˆ˜ë„ +1 í•œë‹¤.</p>

<p><br /></p>

<p align="center"><img src="../assets/img/images/210521/04.png" /></p>

<p>indentëŠ” ê²Œì‹œê¸€ ì¶œë ¥ì‹œì— ë°˜ë³µë¬¸ì˜ end ë³€ìˆ˜ë¡œ ì‚¬ìš©í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span> 
	<span class="o">&lt;</span><span class="nl">c:</span><span class="n">forEach</span> <span class="n">begin</span><span class="o">=</span><span class="s">"1"</span> <span class="n">end</span><span class="o">=</span><span class="s">"${dto.getBoard_indent() }"</span><span class="o">&gt;</span>
		<span class="o">&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span>	<span class="c1">// ë“¤ì—¬ì“°ê¸°</span>
	<span class="o">&lt;/</span><span class="nl">c:</span><span class="n">forEach</span><span class="o">&gt;</span>
						
	<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=request.getContextPath() %&gt;/bbs_cont.do?no=${dto.getBoard_no() }&amp;page=${page }"</span><span class="o">&gt;</span>
						
		<span class="o">&lt;</span><span class="nl">c:</span><span class="n">forEach</span> <span class="n">begin</span><span class="o">=</span><span class="s">"1"</span> <span class="n">end</span><span class="o">=</span><span class="s">"${dto.getBoard_indent() }"</span><span class="o">&gt;</span>
			<span class="n">re</span><span class="o">)</span>
		<span class="o">&lt;/</span><span class="nl">c:</span><span class="n">forEach</span><span class="o">&gt;</span>
		
		<span class="err">$</span><span class="o">{</span><span class="n">dto</span><span class="o">.</span><span class="na">getBoard_title</span><span class="o">()</span> <span class="o">}</span>
	<span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="6-3-deletebbs">6-3. deleteBbs()</h3>
<p>ë‹µë³€ì´ ë‹¬ë¦° ê²Œì‹œê¸€ì€ ì‚­ì œë˜ì§€ ì•Šë„ë¡ sqlë¬¸ì„ ì‘ì„±í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sql</span> <span class="o">=</span> <span class="s">"select count(*) from jsp_bbs where board_no &gt; ? and board_group = ? and board_step &gt; ?"</span><span class="o">;</span>

<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>

<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_no</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_group</span><span class="o">());</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_step</span><span class="o">());</span>

<span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
	<span class="n">count</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span> 
			
<span class="k">if</span><span class="o">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>	<span class="c1">// ë‹µê¸€ì´ ìˆëŠ” ê²Œì‹œë¬¼ì˜ ê²½ìš°</span>
	<span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">;</span>
<span class="o">}</span><span class="k">else</span> <span class="o">{</span>
	<span class="n">sql</span> <span class="o">=</span> <span class="s">"delete from jsp_bbs where board_no = ?"</span><span class="o">;</span>
	<span class="n">pstmt</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
	<span class="n">pstmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">dto</span><span class="o">.</span><span class="na">getBoard_no</span><span class="o">());</span>
	<span class="n">result</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

:ET